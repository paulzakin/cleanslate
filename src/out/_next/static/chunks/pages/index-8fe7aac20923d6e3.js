(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{37412:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(54262)}])},54262:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return pages},firebaseApp:function(){return tW}});var i=n(31020);n(19873);var o=n(53340),r=n(70079),a=n(80126),l=n(75430),c=n(97925),s=n(44821);let createKeyboardShortcutDirectory=()=>{let e=(0,s.b)().dispatch;return{b:()=>{e("openBarcodeModal")},e:()=>{e("openExerciseModal")},f:()=>{e("openFoodModal")},h:()=>{e("openHelpModal")},l:()=>{e("openModal")},m:()=>{e("openMenu")},q:()=>{e("openQuickAddModal")},r:()=>{e("openRecipeModal")}}},getActiveModals=()=>(0,s.b)().get().navbar.activeModals,modalsAreActive=()=>getActiveModals().length>0,executeKeyboardShortcuts=e=>{let t=e.key;if(modalsAreActive());else{let e=createKeyboardShortcutDirectory(),n=e[t];n&&"Escape"!==t&&n()}"Escape"===t&&(0,c.p)()};var d=n(66081),u=n(48891),m=n.n(u);let createDateRange=()=>{let e=m()().startOf("day");return{today:e,tomorrow:e.add(24,"hour")}};var p=n(69161),h=n(5916);let login=()=>{localStorage.setItem(h.WX,"true")};var g=n(15492),b=n(67400),f=n(65647),v=n(19748);let getToken=()=>localStorage.getItem(h.px)||"",getUser=async()=>{if(!v.I)return{token:getToken()};try{let e=await o.Z.auth().currentUser;return e}catch(e){return(0,p.S)(e),null}};var w=n(84375),k=n(67727);function _templateObject(){let e=(0,a._)(["\n    mutation UPSERT_PROFILE($authId: String!, $timezone: String!) {\n      insert_profiles(\n        objects: [{ authId: $authId, timezone: $timezone }]\n        on_conflict: { constraint: profiles_authId_key, update_columns: [] }\n      ) {\n        affected_rows\n      }\n    }\n  "]);return _templateObject=function(){return e},e}let createProfileMutation=async(e,t)=>{let n=(0,w.P)(_templateObject());try{let i=await (await (0,f.a)()).request(n,{authId:e,timezone:t});return i}catch(e){return e}},createProfile=async()=>{try{let e=Intl.DateTimeFormat().resolvedOptions().timeZone,t=await getUser();if(t){if("token"in t)(0,k.k)();else{let n=await t.uid,i=t.providerData[0];i&&await createProfileMutation(n,e)}}}catch(e){return(0,p.S)(e)}},subscribeToProfile=e=>e.request({query:(0,g.O)(d.Wb),variables:createDateRange()}).subscribe({error:e=>{(0,p.S)(e)},next:e=>{let t=e.data,n=(0,s.b)();if(t&&t.profiles&&0!==t.profiles.length){let{missingBasicFoods:e,profiles:i}=(0,b.s)(t.profiles);n.dispatch("updateProfile",i),n.dispatch("handleMissingBasicFoods",e)}else createProfile().then(()=>{login(),window.location.reload()})}});var C=n(62317),y=n(60322);let extractData=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y.h.get().data,{basicFoods:t,profiles:n}=e,i=n[0],{logs:o,recipes:r}=i,a=i.foods,l=[...t,...a];return{foods:l,logs:o,profile:i,recipes:r}},useData=()=>{let{data:e,dispatch:t,navbar:n}=(0,C.bI)("data","navbar");return{dispatch:t,...extractData(e),navbar:n,offline:n.offline}},useLogoutOtherTab=()=>{(0,r.useEffect)(()=>{let isLoggedIn=e=>{"null"===e.newValue&&"null"!==localStorage.getItem(h.WX)&&(0,k.k)()};return window.addEventListener("storage",isLoggedIn),()=>{window.removeEventListener("storage",isLoggedIn)}},[])};var _=n(83966);let isIpad=()=>navigator.userAgent.includes("Mac")&&"ontouchend"in document,isMobile=()=>{let e=navigator.userAgent,t=isIpad()||[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i].some(t=>!!(0,_.j)()&&e.match(t));return t};var O=n(29805);let isPWA=()=>{if((0,_.j)()){let e=["fullscreen","standalone","minimal-ui"].some(e=>window.matchMedia("(display-mode: "+e+")").matches);return e||window.navigator.standalone||document.referrer.includes("android-app://")}return!1},usePWAPrompt=(e,t)=>{r.useEffect(()=>{let n=isMobile()&&!isPWA()&&(0,O.y)()&&!0!==e.hidePWAPrompt;setTimeout(()=>{n&&t("openPWAPrompt")},5e3)},[t,e.hidePWAPrompt])},useShortcuts=e=>{r.useEffect(()=>(window.addEventListener("keyup",e),()=>{window.removeEventListener("keyup",e)}),[e])};var N=n(41145),Z=n.n(N),S=n(68434),B=n(72739),T=n.n(B);let getDomain=()=>(0,O.y)()?window.location.hostname:"localhost";m().extend(Z());let setLastReset=()=>{S.Z.set("last-reset",m()().toString(),{domain:getDomain(),expires:5})},useStartTime=()=>{r.useEffect(()=>{let e=setInterval(()=>{let e=S.Z.get("last-reset");if(void 0===e)return setLastReset();m()(e).isToday()||(setLastReset(),localStorage.setItem(h.ZG,"null"),window.location.reload())},T()("1 second"));return()=>clearInterval(e)},[])},getLoginStatus=()=>{if(!(0,_.j)())return!1;{let e="true"===localStorage.getItem(h.WX);return!!e}};var x=n(44929),j=n(78947),M=n(96758);let createWebsocketClient=()=>new x.SubscriptionClient((0,j.i)().resourceServerUriWs,{connectionParams:()=>(0,M.v)().then(e=>({headers:{authorization:"Bearer ".concat(e)}})).catch(e=>(0,p.S)(e)),reconnect:!0}),getWebsocketClient=async()=>{let e=(0,s.b)(),t=e.get().currentWebsocketClient;if(t)return t;{let t=createWebsocketClient();return e.dispatch("updateCurrentWebsocketClient",t),t}},isLoadedUser=e=>e&&"PENDING"!==e;var P=n(62154);let useSubscription=(e,t,n,i)=>{let o=!(0,P.s)(n);r.useEffect(()=>{getLoginStatus()&&o&&isLoadedUser(t)&&getWebsocketClient().then(t=>{e.forEach(e=>{e(t,i)})})},[t,n])},useUser=()=>{let{navbar:e}=(0,C.bI)("navbar"),{user:t}=e;return t};var I=n(85738);let profileIsLoaded=e=>e.calorieTarget!==I.D4[0];var F=n(62357);function Spinner_templateObject(){let e=(0,a._)(["\n    background-color: ",";\n    height: ","px;\n    width: ","px;\n  "]);return Spinner_templateObject=function(){return e},e}function _templateObject1(){let e=(0,a._)(["\n    text-align: center;\n    > div {\n      animation: sk-bouncedelay 1.4s infinite ease-in-out both;\n      border-radius: 100%;\n      display: inline-block;\n    }\n    .bounce1 {\n      animation-delay: -0.32s;\n    }\n    .bounce2 {\n      animation-delay: -0.16s;\n    }\n  "]);return _templateObject1=function(){return e},e}let Spinner=e=>{let{color:t,height:n,width:o}=e,r=(0,l.iv)(Spinner_templateObject(),t||"#333",n||18,o||18),a=(0,l.iv)(_templateObject1());return(0,i.BX)("div",{css:a,className:"frc w100 mt50",children:[(0,i.tZ)("div",{css:r,className:"bounce1"}),(0,i.tZ)("div",{css:r,className:"bounce2"}),(0,i.tZ)("div",{css:r,className:"bounce3"})]})};function Body_templateObject(){let e=(0,a._)(["\n    height: calc(100% - ","px);\n  "]);return Body_templateObject=function(){return e},e}let Body=e=>{let{children:t,footer:n,navbar:o,profile:r}=e,a=profileIsLoaded(r),c=(0,l.iv)(Body_templateObject(),o+n);return(0,i.BX)("div",{css:c,className:"scroll",children:[!a&&(0,i.tZ)("div",{className:"h100 w100 fcc",children:(0,i.tZ)(Spinner,{color:F.O9.purple})}),a&&t]})};function BottomBar_templateObject(){let e=(0,a._)(["\n    border-top: 1px solid ",";\n    height: ","px;\n  "]);return BottomBar_templateObject=function(){return e},e}let BottomBar=e=>{let{children:t,height:n}=e,o=(0,l.iv)(BottomBar_templateObject(),F.O9.lightgrey,n);return(0,i.tZ)("div",{css:o,id:"footer",className:"frc w100 z2",children:t})};var R={src:"/_next/static/media/barcode.2fc7c397.svg",height:512,width:512,blurWidth:0,blurHeight:0},L={src:"/_next/static/media/exercise.190eaea0.svg",height:512,width:512,blurWidth:0,blurHeight:0},A={src:"/_next/static/media/fast.745f2dea.svg",height:512,width:512,blurWidth:0,blurHeight:0},E={src:"/_next/static/media/magnify.b698c5cb.svg",height:512,width:512,blurWidth:0,blurHeight:0};function HiddenInput_templateObject(){let e=(0,a._)(["\n    border: 0;\n    cursor: pointer;\n    height: 100%;\n    left: 0;\n    opacity: 0;\n    padding: 0;\n    position: absolute;\n    top: 0;\n    width: 100%;\n  "]);return HiddenInput_templateObject=function(){return e},e}let HiddenInput=e=>{let{inputMode:t,type:n}=e,o=(0,l.iv)(HiddenInput_templateObject());return(0,i.tZ)("input",{type:n||"text",inputMode:t||"text",tabIndex:-1,css:o,autoCapitalize:"off",autoComplete:"off",autoCorrect:"off"})};function BottomBarButtons_templateObject(){let e=(0,a._)(["\n    border-top: 1px solid ",";\n    button {\n      flex: 1;\n      height: 64px;\n      padding: 0;\n      position: relative;\n\n      > img {\n        height: 28px;\n        width: 28px;\n      }\n    }\n  "]);return BottomBarButtons_templateObject=function(){return e},e}let BottomBarButtons=e=>{let{profile:t}=e,{dispatch:n}=(0,C.bI)(),o=(0,l.iv)(BottomBarButtons_templateObject(),F.O9.white);return(0,i.BX)("div",{id:"footer",css:o,className:"frc w100",children:[(0,i.tZ)("button",{id:"openMenu",type:"button",onClick:()=>{n("openMenu")},children:(0,i.tZ)("img",{alt:"Open icon for navbar",src:"/_next/static/media/hamburger.5ed49145.svg"})}),t.showCalories&&(0,i.tZ)("button",{id:"openExerciseModal",type:"button",onClick:()=>{n("openExerciseModal")},children:(0,i.tZ)("img",{alt:"Person running",src:L.src})}),t.showCalories&&(0,i.BX)("button",{type:"button",id:"openQuickAddModal",onClick:()=>{t.enablePlanning?n("openFoodFormModal"):n("openQuickAddModal")},children:[!t.enablePlanning&&(0,i.tZ)(HiddenInput,{type:"text",inputMode:"decimal"}),(0,i.tZ)("img",{alt:"Rocket",src:A.src})]}),t.showCalories&&(0,i.tZ)("button",{id:"openBarcodeModal",type:"button",onClick:()=>{n("openBarcodeModal")},children:(0,i.tZ)("img",{alt:"Barcode",src:R.src})}),(0,i.BX)("button",{id:"openModal",type:"button",onClick:()=>{n("openModal")},children:[(0,i.tZ)(HiddenInput,{}),(0,i.tZ)("img",{alt:"Magnifying glass",src:E.src})]})]})};var D=n(51704),X=n.n(D),W=n(21644),U=n(61799);let z="Snack",G={Breakfast:0,Lunch:1,Dinner:2,Snack:3};let Log=class Log{constructor(){this.basicFood=(0,U.V)()||null,this.food=(0,U.V)()||null,this.recipe=(0,U.V)()||null,this.id=(0,U.V)(),this.updatedAt=new Date,this.createdAt=new Date,this.logToFood=null,this.logToRecipe=null,this.logToProfile=null,this.type="log"}};let sortByCreatedAt=e=>e.sort((e,t)=>Number(new Date(t.createdAt))-Number(new Date(e.createdAt)));var H=n(44607),V={src:"/_next/static/media/barcode-without-scanner.71c3df98.svg",height:568,width:568,blurWidth:0,blurHeight:0},q=n(74587);let deleteLogOnCloud=(e,t)=>(0,f.a)().then(n=>{n.request((0,g.O)(q.wk),{id:e}).then(e=>{y.h.dispatch("removeLogsById",[e.delete_logs_by_pk.id]),t()})}).catch(e=>{(0,p.S)(e)}),updateLogOnCloud=(e,t)=>(0,f.a)().then(n=>{n.request((0,g.O)(q.rO),e).then(e=>{y.h.dispatch("updateLog",e.update_logs_by_pk),t()})}).catch(e=>(0,p.S)(e));var Q={src:"/_next/static/media/trash.3b577ddf.svg",height:16,width:16,blurWidth:0,blurHeight:0},K=n(90196);function DeleteButton_templateObject(){let e=(0,a._)(["\n      width: 42px;\n      height: 42px;\n    "]);return DeleteButton_templateObject=function(){return e},e}let DeleteButton=e=>{let{id:t,onDelete:n}=e;return(0,i.tZ)("button",{"data-id":"delete-button",type:"button",className:"background frc deleteButton",css:(0,l.iv)(DeleteButton_templateObject()),onClick:()=>{n&&n(t)},children:(0,i.tZ)(K.E,{width:22,height:22,alt:"Trash",src:Q})})};var J=n(70088),Y=n.n(J);let capitalize=e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase();var $=n(28771),ee=n.n($);let Food=class Food{constructor(){this.basicFoodId=(0,U.V)()||null,this.id=(0,U.V)(),this.updatedAt=new Date,this.createdAt=new Date,this.name="Chicken",this.group="Protein",this.category="Chicken",this.type="food",this.isDummy=!1}};let et=["Food","Recipe"],en=["Cheese","Cottage cheese","Dairy","Milk","Nut milk","Quark","Yogurt"],ei=["Baked food","Butter","Candy","Cream","Ice cream","Mayonnaise","Nut","Oil","Seed","Snack","Sour cream","Sweetener"],eo=["Dried fruit","Fruit"],er=["Bagel","Bread","Dough","Flour","Muffin","Noodles","Pasta","Rice","Tortilla","Whole grain"],ea=["Alcohol","Beverage","Prepared food","Sauce","Stock","Vinegar","Wine"],el=["Bean","Beef","Chicken","Chickpea","Cold cut","Edamame","Eggs","Fish","Gluten","Goat","Ground meat","Jerky","Lamb","Lentil","Lentils","Organ meat","Pea","Pork","Protein powder","Ribs","Shellfish","Soy","Turkey"],ec=["Dried herb","Herb","Leafy green","Lettuce","Pea","Pepper","Spice","Vegetable"],es=[...et,...en,...ei,...eo,...er,...ea,...el,...ec].sort((e,t)=>e.localeCompare(t));[...ea];let mapCategoryToGroup=e=>{if(et.includes(e))return"Custom";if(en.includes(e))return"Dairy";if(ei.includes(e))return"Fat or sugar";if(eo.includes(e))return"Fruit";if(er.includes(e))return"Grain";if(ea.includes(e))return"Other";if(el.includes(e))return"Protein";else if(ec.includes(e))return"Vegetable";else return null},addCategoryToDummyFood=e=>{if(es.includes(e.name))return e.name;throw Error("".concat(e.name," is not a valid group, check addCategoryToDummyFood"))},addGroupToDummyFood=e=>{let t=mapCategoryToGroup(e.name);if(t)return e.name;throw Error("".concat(e.name," is not a valid group, check addGroupToDummyFood"))},createDummyFood=(e,t,n)=>{let i=new Food;return i.name=capitalize(e),i.group=t||addGroupToDummyFood(i),i.category=n||addCategoryToDummyFood(i),i.isDummy=!0,i},ed={"Cottage cheese":{"1%":["Cottage cheese (1%)"],"2%":["Cottage cheese (2%)"]},Mayonnaise:{"Full fat":["Mayonnaise (full-fat)"],Light:["Mayonnaise (light)"]},Milk:{"1%":["Milk (1%)"],"2%":["Milk (2%)"],Skim:["Skim milk"],Whole:["Whole milk"]},"Sour cream":{"Full fat":["Sour cream (full-fat)"],Light:["Sour cream (light)"]},Yogurt:{Greek:{"2%":["Greek yogurt (2%)"],"Non-fat":["Greek yogurt (non-fat)"],Whole:["Greek yogurt (whole)"]},Plain:{"Low-fat":["Plain yogurt (low-fat)"],"Non-fat":["Plain yogurt (non-fat)"],Whole:["Plain yogurt (whole)"]}}};Object.keys(ed);let eu=["Angel hair","Cannelloni","Capellini","Conchiglie","Ditalini","Elbow macaroni","Farfalle","Fettuccine","Fusilli","Lasagna","Linguine","Manicotti","Orecchiette","Orzo","Pappardelle","Pastina","Penne","Radiatore","Rigatoni","Rotelle","Rotini","Spaghetti","Tagliatelle","Torchio","Vermicelli","Ziti"],em={Bean:{Adzuki:{Cooked:["Adzuki beans (cooked)"],Dry:["Adzuki beans (dry)"]},Black:{Cooked:["Black beans (cooked)"],Dry:["Black beans (dry)"]},"Black-eyed peas":{Cooked:["Black-eyed peas (cooked)"],Dry:["Black-eyed peas (dry)"]},Cannellini:{Cooked:["Cannellini beans (cooked)"],Dry:["Cannellini beans (dry)"]},Chickpeas:{Cooked:["Chickpeas (cooked)"],Dry:["Chickpeas (dry)"]},Fava:{Cooked:["Fava beans (cooked)"],Dry:["Fava beans (dry)"]},"Great northern":{Cooked:["Great northern beans (cooked)"],Dry:["Great northern beans (dry)"]},Kidney:{Cooked:["Kidney beans (cooked)"],Dry:["Kidney beans (dry)"]},Lima:{Cooked:["Lima beans (cooked)"],Dry:["Lima beans (dry)"]},Mung:{Cooked:["Mung beans (cooked)"],Dry:["Mung beans (dry)"]},Pinto:{Cooked:["Pinto beans (cooked)"],Dry:["Pinto beans (dry)"]},Soy:{Cooked:["Soy beans (cooked)"],Dry:["Soy beans (dry)"]},White:{Cooked:["White beans (dry)"],Dry:["White beans (cooked)"]}},Beef:{Fatty:{Cooked:["Fatty beef (cooked)"],Raw:["Fatty beef (raw)"]},"I want to be more specific":{"Bottom round":{Cooked:["Bottom round (cooked)"],Raw:["Bottom round (raw)"]},"Eye of round":{Cooked:["Eye of round (cooked)"],Raw:["Eye of round (raw)"]},Ribeye:{Cooked:["Ribeye (cooked)"],Raw:["Ribeye (raw)"]},"Sirloin tip":{Cooked:["Sirloin tip (cooked)"],Raw:["Sirloin tip (raw)"]},"Skirt steak":{Cooked:["Skirt steak (cooked)"],Raw:["Skirt steak (raw)"]},"Strip steak":{Cooked:["Strip steak (cooked)"],Raw:["Strip steak (raw)"]},"Top round":{Cooked:["Top round (cooked)"],Raw:["Top round (raw)"]}},Lean:{Cooked:["Lean beef (cooked)"],Raw:["Lean beef (raw)"]}},Bread:{French:["French bread"],Italian:["Italian bread"],"Multi-grain":["Multi-grain bread"],Naan:["Naan bread"],Pita:["Pita bread"],Rye:["Rye bread"],Sourdough:["Sourdough bread"],White:["White bread"],"Whole wheat":["Whole wheat bread"]},Butter:{Almond:["Almond butter"],Cashew:["Cashew butter"],Cocoa:["Cocoa butter"],Normal:["Butter"],"Sunflower seed":["Sunflower seed butter"]},Cheese:{American:["American cheese"],Asiago:["Asiago cheese"],Blue:["Blue cheese"],Brie:["Brie cheese"],"Buffalo cheese":["Buffalo mozzarella cheese"],"Buffalo milk":["Buffalo milk cheese"],Camembert:["Camembert cheese"],Cheddar:["Cheddar cheese"],Chihuahua:["Chihuahua cheese"],Colby:["Colby cheese"],Cotija:["Cotija cheese"],Cream:["Cream cheese"],Edam:["Edam cheese"],Emmentaler:["Emmentaler cheese"],Epoisses:["Epoisses cheese"],Feta:["Feta cheese"],Fontina:["Fontina cheese"],Goat:["Goat cheese"],Gorgonzola:["Gorgonzola cheese"],Gouda:["Gouda cheese"],Gruyere:["Gruyere cheese"],Havarti:["Havarti cheese"],Jarlsberg:["Jarlsberg cheese"],Manchego:["Manchego cheese"],Mexican:["Mexican blend"],Monterey:["Monterey Jack cheese"],Mozzarella:["Mozzarella cheese"],Muenster:["Muenster cheese"],Neufchatel:["Neufchatel cheese"],Parmesan:["Parmesan cheese"],Pecorino:["Pecorino Romano cheese"],Provolone:["Provolone cheese"],Ricotta:["Ricotta cheese"],Roquefort:["Roquefort cheese"],Stilton:["Stilton cheese"],Swiss:["Swiss cheese"]},Chicken:{Breast:{"With skin":{Cooked:["Chicken breast with skin (cooked)"],Raw:["Chicken breast with skin (raw)"]},"Without skin":{Cooked:["Chicken breast without skin (cooked)"],Raw:["Chicken breast without skin (raw)"]}},Drumstick:{"With skin":{"With bone":{Cooked:["Chicken drumstick with skin with bone (cooked)"],Raw:["Chicken drumstick with skin with bone (raw)"]},"Without bone":{Cooked:["Chicken drumstick with skin without bone (cooked)"],Raw:["Chicken drumstick with skin without bone (raw)"]}},"Without skin":{"With bone":{Cooked:["Chicken drumstick without skin with bone (cooked)"],Raw:["Chicken drumstick without skin with bone (raw)"]},"Without bone":{Cooked:["Chicken drumstick without skin without bone (cooked)"],Raw:["Chicken drumstick without skin without bone (raw)"]}}},Tenderloin:{Cooked:["Chicken tenderloin (cooked)"],Raw:["Chicken tenderloin (raw)"]},Thigh:{"With skin":{"With bone":{Cooked:["Chicken thigh with skin with bone (cooked)"],Raw:["Chicken thigh with skin with bone (raw)"]},"Without bone":{Cooked:["Chicken thigh with skin without bone (cooked)"],Raw:["Chicken thigh with skin without bone (raw)"]}},"Without skin":{"With bone":{Cooked:["Chicken thigh without skin with bone (cooked)"],Raw:["Chicken thigh without skin with bone (raw)"]},"Without bone":{Cooked:["Chicken thigh without skin without bone (cooked)"],Raw:["Chicken thigh without skin without bone (raw)"]}}},Wing:{"With skin":{"With bone":{Cooked:["Chicken wing with skin with bone (cooked)"],Raw:["Chicken wing with skin with bone (raw)"]},"Without bone":{Cooked:["Chicken wing with skin without bone (cooked)"],Raw:["Chicken wing with skin without bone (raw)"]}},"Without skin":{"With bone":{Cooked:["Chicken wing without skin with bone (cooked)"],Raw:["Chicken wing without skin with bone (raw)"]},"Without bone":{Cooked:["Chicken wing without skin without bone (cooked)"],Raw:["Chicken wing without skin without bone (raw)"]}}}},...ed,Dough:{Choux:["Choux pastry"],Filo:["Filo pastry"],Flaky:["Flaky pastry"],Pizza:["Pizza dough"],Puff:["Puff pastry"],Shortcrust:["Shortcrust pastry"]},"Dried fruit":{Apple:["Apple chips"],Apricots:["Dried apricots"],Banana:["Banana chips"],Blueberries:["Dried blueberries"],Cherries:["Dried cherries"],Cranberries:["Dried cranberries"],Currants:["Dried currants"],Figs:["Dried figs"],Kiwi:["Dried kiwi"],Mango:["Dried mango"],Nectarines:["Dried nectarines"],Oranges:["Orange chips"],Peaches:["Dried peaches"],Pears:["Dried pears"],Persimmons:["Dried persimmons"],Pluots:["Dried pluots"],Prunes:["Prune"],Raisins:["Raisin"],Strawberries:["Dried strawberries"]},"Dried herb":{Basil:["Dried basil"],Oregano:["Dried oregano"],Parsley:["Dried parsley"],Rosemary:["Dried rosemary"],Tarragon:["Dried tarragon"]},Flour:{Almond:["Almond flour"],Arrowroot:["Arrowroot flour"],Chickpea:["Chickpea flour"],Coconut:["Coconut flour"],Hazelnut:["Hazelnut flour"],Oat:["Oat flour"],Peanut:["Peanut flour"],White:["White flour"],"Whole wheat":["Whole wheat flour"]},"Ground meat":{Beef:{"70/30":{Cooked:["Ground beef (70/30) (cooked)"],Raw:["Ground beef (70/30) (raw)"]},"80/20":{Cooked:["Ground beef (80/20) (cooked)"],Raw:["Ground beef (80/20) (raw)"]},"90/10":{Cooked:["Ground beef (90/10) (cooked)"],Raw:["Ground beef (90/10) (raw)"]}},Lamb:{Cooked:["Ground lamb (cooked)"],Raw:["Ground lamb (raw)"]},Pork:{"84/16":{Cooked:["Ground pork (84/16) (cooked)"],Raw:["Ground pork (84/16) (raw)"]},"96/4":{Cooked:["Ground pork (96/4) (cooked)"],Raw:["Ground pork (96/4) (raw)"]}},Turkey:{"85/15":{Cooked:["Ground turkey (85/15) (cooked)"],Raw:["Ground turkey (85/15) (raw)"]},"93/7":{Cooked:["Ground turkey (93/7) (cooked)"],Raw:["Ground turkey (93/7) (raw)"]}}},Jerky:{Beef:["Beef jerky"],Turkey:["Turkey jerky"]},Lamb:{Leg:{Cooked:["Lamb leg (cooked)"],Raw:["Lamb leg (raw)"]},Loin:{Cooked:["Lamb loin (cooked)"],Raw:["Lamb loin (raw)"]},Shoulder:{Cooked:["Lamb shoulder (cooked)"],Raw:["Lamb shoulder (raw)"]}},Lentils:{Cooked:["Lentils (cooked)"],Dry:["Lentils (dry)"]},Lettuce:{Boston:["Boston lettuce"],Butter:["Butter lettuce"],"Green leaf":["Green leaf lettuce"],Iceberg:["Iceberg lettuce"],"Red leaf":["Red leaf lettuce"],Romaine:["Romaine lettuce"]},Noodles:{Egg:{Cooked:["Egg noodles (cooked)"],Dry:["Egg noodles (dry)"]},Glass:{Cooked:["Glass noodles (cooked)"],Dry:["Glass noodles (dry)"]},Rice:{Cooked:["Rice noodles (cooked)"],Dry:["Rice noodles (dry)"]},Soba:{Cooked:["Soba noodles (cooked)"],Dry:["Soba noodles (dry)"]},Somen:{Cooked:["Somen noodles (cooked)"],Dry:["Somen noodles (dry)"]},Udon:{Cooked:["Udon noodles (cooked)"],Dry:["Udon noodles (dry)"]}},"Nut milk":{Almond:["Almond milk"],Cashew:["Cashew milk"],Coconut:["Coconut milk"],Flax:["Flax milk"],Hemp:["Hemp milk"],"Macadamia nut":["Macadamia nut milk"],Oat:["Oat milk"],Rice:["Rice milk"],Soy:["Soy milk"]},"Organ meat":{Liver:{Beef:{Cooked:["Beef liver (cooked)"],Raw:["Beef liver (raw)"]},Chicken:{Cooked:["Chicken liver (cooked)"],Raw:["Chicken liver (raw)"]}}},Pasta:{White:{Cooked:["White pasta (cooked)"],Dry:["White pasta (dry)"]},"Whole wheat":{Cooked:["Whole wheat pasta (cooked)"],Dry:["Whole wheat pasta (dry)"]}},Pea:{Green:["Green peas"],Split:["Split peas"],"Sugar snap":["Sugar snap peas"]},Pepper:{Chili:["Chili peppers"],"Green bell":["Green bell pepper"],Jalapeno:["Jalapeno peppers"],Poblano:["Poblano pepper"],"Red bell":["Red bell pepper"],Serrano:["Serrano pepper"]},Pork:{Belly:{Cooked:["Pork belly (cooked)"],Raw:["Pork belly (raw)"]},Chops:{Cooked:["Pork chops (cooked)"],Raw:["Pork chops (raw)"]},Leg:{Cooked:["Pork leg (cooked)"],Raw:["Pork leg (raw)"]},Loin:{Cooked:["Pork loin (cooked)"],Raw:["Pork loin (raw)"]},Shoulder:{Cooked:["Pork shoulder (cooked)"],Raw:["Pork shoulder (raw)"]}},"Protein powder":{"Brown rice":["Brown rice protein powder"],Casein:["Casein protein powder"],Hemp:["Hemp protein powder"],Pea:["Pea protein powder"],Soy:["Soy protein powder"],Whey:["Whey protein powder"]},Ribs:{Beef:{Cooked:["Ribs (cooked)"],Raw:["Ribs (raw)"]},Lamb:{Cooked:["Lamb ribs (cooked)"],Raw:["Lamb ribs (raw)"]},Pork:{Cooked:["Pork ribs (cooked)"],Raw:["Pork ribs (raw)"]}},Rice:{Brown:{Cooked:["Brown rice (cooked)"],Dry:["Brown rice (dry)"]},White:{Cooked:["White rice (cooked)"],Dry:["White rice (dry)"]},Wild:{Cooked:["Wild rice (cooked)"],Dry:["Wild rice (dry)"]}},Tortilla:{Corn:["Corn tortilla"],Flour:["Flour tortilla"]},Turkey:{Breast:{"With skin":{Cooked:["Turkey breast with skin (cooked)"],Raw:["Turkey breast with skin (raw)"]},"Without skin":{Cooked:["Turkey breast without skin (cooked)"],Raw:["Turkey breast without skin (raw)"]}},Leg:{"With skin":{Cooked:["Turkey leg with skin (cooked)"],Raw:["Turkey leg with skin (raw)"]},"Without skin":{Cooked:["Turkey leg without skin (cooked)"],Raw:["Turkey leg without skin (raw)"]}},Wing:{"With skin":{Cooked:["Turkey wing with skin (cooked)"],Raw:["Turkey wing with skin (raw)"]},"Without skin":{Cooked:["Turkey wing without skin (cooked)"],Raw:["Turkey wing without skin (raw)"]}}},Vinegar:{"Apple cider":["Apple cider vinegar"],Balsamic:["Balsamic vinegar"],"Red wine":["Red wine vinegar"],"Rice wine":["Rice wine vinegar"],"Sherry wine":["Sherry wine vinegar"],White:["White vinegar"],"White wine":["White wine vinegar"]},"Whole grain":{Amaranth:{Cooked:["Amaranth (cooked)"],Dry:["Amaranth (dry)"]},Barley:{Cooked:["Barley (cooked)"],Dry:["Barley (dry)"]},Buckwheat:{Cooked:["Buckwheat (cooked)"],Dry:["Buckwheat (dry)"]},Bulger:{Cooked:["Bulgur (cooked)"],Dry:["Bulgur (dry)"]},Couscous:{Cooked:["Couscous (cooked)"],Dry:["Couscous (dry)"]},Farro:{Cooked:["Farro (cooked)"],Dry:["Farro (dry)"]},Freekeh:{Cooked:["Freekeh (cooked)"],Dry:["Freekeh (dry)"]},Hominy:{Cooked:["Hominy (cooked)"],Dry:["Hominy (dry)"]},Millet:{Cooked:["Millet (cooked)"],Dry:["Millet (dry)"]},Oats:{Cooked:["Oats (cooked)"],Dry:["Oats (dry)"]},Polenta:{Cooked:["Polenta (cooked)"],Dry:["Polenta (dry)"]},Quinoa:{Cooked:["Quinoa (cooked)"],Dry:["Quinoa (dry)"]},"Rye berries":{Cooked:["Rye berries (cooked)"],Dry:["Rye berries (dry)"]},Sorghum:{Cooked:["Sorghum (cooked)"],Dry:["Sorghum (dry)"]},Spelt:{Cooked:["Spelt (cooked)"],Dry:["Spelt (dry)"]},Teff:{Cooked:["Teff (cooked)"],Dry:["Teff (dry)"]},"Wheat berries":{Cooked:["Wheat berries (cooked)"],Dry:["Wheat berries (dry)"]}},Wine:{Red:["Red wine"],Shaoxing:["Shaoxing wine"],Sherry:["Sherry wine"],White:["White wine"]}};Object.keys(em).map(e=>createDummyFood(e));let getAllDummyFoodLeaves=e=>{let t={},recurse=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];for(let[i,o]of Object.entries(e))Array.isArray(o)?t[o[0]]=n[0]:recurse(o,[...n,i])};return recurse(e),t},isDummyFood=(e,t)=>{let n=getAllDummyFoodLeaves(t?em[t]:em);return e in n},removeParens=e=>e.replace(")","").replace("(",""),getDummyFoodPath=e=>{let t=[];return isDummyFood(e)?(ee()(em).reduce(function(n,i){if(e&&e===i){let n=this.path.slice(0,-1).map(e=>e.toLowerCase()),i=removeParens(e).toLowerCase().split(" ").slice(-1)[0];t.push({leaf:i,stem:n})}},[]),t[0]):null},getDummyFoodTree=e=>{let t=capitalize(e.stem[0]),n=em[t];return{root:t,tree:n}},getThreshold=e=>["Beef","Lettuce","Noodles","Pasta","Protein powder","Rice","Ribs","Vinegar"].includes(e)?1:2,getNameAndTags=(e,t)=>{let n=-1===t.indexOf("[")?"":t.slice(t.indexOf("[")),i=getDummyFoodPath(t||e);if(null===i)return{name:Y()(e,{length:30}),tags:[]};{let{leaf:t,stem:o}=i,{root:r}=getDummyFoodTree(i),a=getThreshold(r),l=capitalize((o.length<=a?e:o.slice(0,a).join(" ")).replace("whole grain ","")).replace("Ground meat","Ground"),c=["i want to be more specific"],s=o.length<=a?[]:[...new Set([...o,t])].slice(a).filter(e=>!l.includes(e)).filter(e=>!c.includes(e)).filter(e=>!n.toLowerCase().includes(e)).map(e=>e.replace("(","").replace(")","")),d=n?"".concat(n.replace("[","").replace("]","")," ").concat(l.toLowerCase()):l;return{name:Y()(d,{length:30}),tags:s}}};var ep={src:"/_next/static/media/calmini.584a2907.svg",height:125,width:85,blurWidth:0,blurHeight:0},eh={src:"/_next/static/media/density.6b224f44.svg",height:512,width:512,blurWidth:0,blurHeight:0},eg={src:"/_next/static/media/proteinmini.51f9ee69.svg",height:125,width:85,blurWidth:0,blurHeight:0},eb=n(4602),ef=n(92504);function Macros_templateObject(){let e=(0,a._)(["\n    font-size: 12px;\n    margin-left: auto;\n    white-space: nowrap;\n    margin-top: 3px;\n\n    img {\n      margin: 0px 6px;\n      margin-left: 0px;\n    }\n\n    span {\n      margin-right: 6px;\n    }\n  "]);return Macros_templateObject=function(){return e},e}function Macros_templateObject1(){let e=(0,a._)(["\n                  position: relative;\n                  top: 1px;\n                "]);return Macros_templateObject1=function(){return e},e}let Macros=e=>{let{log:t,profile:n,showTitles:o}=e,{dispatch:r}=(0,C.bI)(),[a,c]=(0,ef.cE)([t]).map(e=>Math.round(e)),s=(0,eb.Xc)(t.amount,t.barcode||t.logToFood||t.logToRecipe,a,c),d=null,u=null,m=null;s&&(d=s[0],u=s[1],m=s[2],Number.isNaN(d)&&(d=0),Number.isNaN(u)&&(u=0),Number.isNaN(m)&&(m=0));let p=(0,l.iv)(Macros_templateObject());return a>=0?(0,i.tZ)("div",{id:"macros",css:p,children:(0,i.BX)("div",{className:"fr",children:[(0,i.BX)("div",{id:"MacrosCalories",className:"fr",children:[(0,i.tZ)(K.E,{width:10,height:10,alt:"Fire",src:ep}),o&&(0,i.tZ)("div",{className:"mr5",children:"Calories:"}),(0,i.tZ)("span",{children:a})]}),(0,i.BX)("div",{id:"MacrosProtein",className:"fr ".concat(o?"ml5":""),children:[(0,i.tZ)(K.E,{width:10,height:10,alt:"Strong arm flexing",src:eg}),o&&(0,i.tZ)("div",{className:"mr5",children:"Protein:"}),(0,i.tZ)("span",{children:c})]}),s&&n.showDensities&&(0,i.BX)("div",{onClick:()=>r("openInformationModal",(0,i.BX)("div",{children:[(0,i.BX)("strong",{children:[d,"/",u]})," ","stands for caloric density (",d,") and protein density (",u,"). To learn more about them, first navigate to"," ",(0,i.tZ)("a",{href:"https://cleanslate.sh/weight-loss",target:"_blank",rel:"noreferrer",children:"here"}),". Then, read the third and fourth sections.",(0,i.tZ)("br",{}),(0,i.tZ)("br",{}),"If you would like to see a reference table of all basic foods by caloric and protein density, navigate to"," ",(0,i.tZ)("a",{href:"/foods",target:"_blank",rel:"noreferrer",children:"here"}),"."]})),children:[(0,i.tZ)(K.E,{css:(0,l.iv)(Macros_templateObject1()),width:10,height:10,alt:"Little balls pressed together",src:eh}),(0,i.BX)("span",{children:[d,"/",u]})]})]})}):(0,i.tZ)("div",{})},renderMacros=(e,t)=>{if("log"!==e.type&&"ingredient"!==e.type)return(0,i.tZ)("div",{children:""});{let n=new Log;return n.logToFood=e.food,n.logToRecipe=e.recipe||e.childRecipe,n.logToProfile=null,n.amount=e.amount||0,n.unit=e.unit||"COUNT",n.barcode=e.barcode,(0,i.tZ)(Macros,{log:n,profile:t,showTitles:!1})}},spawnItemEditModal=(e,t)=>{let{food:n,recipe:i,type:o}=e;"food"===o||"log"===o&&(null==n?void 0:n.basicFoodId)===null?(t("setFoodToUpdate",null==n?void 0:n.id),t("openFoodFormModal")):("recipe"===o||"log"===o&&i)&&t("openRecipeFormModal",null==i?void 0:i.id)};var ev=n(40239);function Amount_templateObject(){let e=(0,a._)(["\n        padding-right: 3px;\n      "]);return Amount_templateObject=function(){return e},e}let Amount=e=>{let{amount:t}=e;return(0,i.tZ)("div",{css:(0,l.iv)(Amount_templateObject()),children:t&&(0,ev.N)(t,2)})};function ConsumeButton_templateObject(){let e=(0,a._)(["\n          width: 25px !important;\n          height: 25px !important;\n          margin: 0px !important;\n          margin-left: 5px !important;\n          position: relative;\n          top: 1px;\n        "]);return ConsumeButton_templateObject=function(){return e},e}let ConsumeButton=e=>{let{item:t}=e;return(0,i.BX)("div",{className:"fr mt10",children:[(0,i.tZ)("div",{css:eC,children:"Eaten:"}),(0,i.tZ)("input",{css:(0,l.iv)(ConsumeButton_templateObject()),onChange:()=>{t.unit&&null!==t.amount&&updateLogOnCloud({pk_columns:{id:t.id},set:{amount:t.amount,consumed:!t.consumed,unit:t.unit}},()=>{})},checked:t.consumed||!1,type:"checkbox",id:"consumed"})]})};function Tags_templateObject(){let e=(0,a._)(["\n    border-radius: 5px;\n    font-size: 0.7rem;\n    font-weight: 400;\n    margin-right: 5px;\n    margin-top: 5px;\n    padding: 5px 7.5px;\n  "]);return Tags_templateObject=function(){return e},e}let Tags=e=>{let{tags:t}=e,n=(0,l.iv)(Tags_templateObject());return(0,i.tZ)("div",{className:"fc",children:t.length>0&&(0,i.tZ)("div",{className:"fr m5 wrap",children:t.map(e=>(0,i.tZ)("span",{css:n,className:"pink",children:e},e))})})};var ew=n(72625),ek=n.n(ew);let makeUnitPretty=(e,t)=>{var n,i,o,r,a,l;return"CALORIE"===t?"calories":"EXERCISE"===t?"calories burned":"COUNT"===t?(null===(n=e.food)||void 0===n?void 0:n.countName)||(null===(i=e.childRecipe)||void 0===i?void 0:i.countName)||(null===(o=e.recipe)||void 0===o?void 0:o.countName)||W.Ae:"CONTAINER"===t?(null===(r=e.food)||void 0===r?void 0:r.containerName)||(null===(a=e.childRecipe)||void 0===a?void 0:a.containerName)||(null===(l=e.recipe)||void 0===l?void 0:l.containerName)||W.JX:"mL"===t?t:null==t?void 0:t.toLowerCase()},UnitInput=e=>{let{item:t,unit:n}=e,{amount:o}=t,r=makeUnitPretty(t,n);return(0,i.tZ)("div",{children:Number(o)>1&&r&&"mL"!==n&&"LBS"!==n&&"OZ"!==n&&"TBSP"!==n&&"TSP"!==n?ek()(r):r})};function Meta_templateObject(){let e=(0,a._)(["\n  font-size: 13px;\n  line-height: 0px;\n"]);return Meta_templateObject=function(){return e},e}function Meta_templateObject1(){let e=(0,a._)(["\n  height: 40px;\n  margin-right: 15px;\n  width: 40px;\n"]);return Meta_templateObject1=function(){return e},e}function _templateObject2(){let e=(0,a._)(["\n  border-radius: 5px;\n  font-size: 14px;\n  padding: 10px 15px;\n"]);return _templateObject2=function(){return e},e}function _templateObject3(){let e=(0,a._)(["\n  cursor: pointer;\n  text-decoration: underline;\n"]);return _templateObject3=function(){return e},e}function _templateObject4(){let e=(0,a._)(["\n                  height: ",";\n                  justify-content: center;\n                  white-space: nowrap;\n                  width: ",";\n                "]);return _templateObject4=function(){return e},e}function _templateObject5(){let e=(0,a._)(["\n                  font-size: 11px !important;\n                  position: relative;\n                  margin-left: 6px;\n                "]);return _templateObject5=function(){return e},e}function _templateObject6(){let e=(0,a._)(["\n                  font-size: 13px !important;\n                  background-color: ",";\n                  padding: 5px;\n                  border-radius: 5px;\n                  min-width: 40px;\n                "]);return _templateObject6=function(){return e},e}function _templateObject7(){let e=(0,a._)(["\n                    margin: 0px auto;\n                  "]);return _templateObject7=function(){return e},e}let eC=(0,l.iv)(Meta_templateObject()),ey=(0,l.iv)(Meta_templateObject1()),e_=(0,l.iv)(_templateObject2()),eO=(0,l.iv)(_templateObject3()),Meta=e=>{var t,n;let{dispatch:o,item:r}=e,{alias:a,amount:c,barcode:s,food:d,name:u,profile:m,recipe:p,src:h,type:g,unit:b}=r,f="recipe"===g,v=!!("food"===g&&m),w="log"===g&&!!((null==d?void 0:null===(t=d.foodToProfile)||void 0===t?void 0:t.authId)||p),k=getNameAndTags("log"!==g?u||capitalize((null==s?void 0:s.name)||""):(null==p?void 0:p.name)||(null==d?void 0:d.name)||capitalize((null==s?void 0:s.name)||"")||u||"",a||""),C="log"===g&&b&&!W.mM.includes(b)||"ingredient"===g?19:25;return(0,i.tZ)("div",{className:"fr expand",children:(0,i.BX)("div",{className:"fr ".concat(w?"pointer":""),children:[h&&(0,i.tZ)("img",{css:ey,alt:"Item",src:h}),(0,i.BX)("div",{className:"fc",children:[(0,i.BX)("div",{className:"fr",children:[(0,i.tZ)("div",{id:"MetaItemName",onClick:()=>w&&spawnItemEditModal(r,o),className:["food","recipe"].includes(g)?"fcs":"",css:[eC,null===h&&e_,w&&eO,v&&F.ek,f&&F.iN,(0,l.iv)(_templateObject4(),["food","recipe"].includes(g)?"40px !important;":"auto",b&&W.mM.includes(b)?"125px":void 0)],children:Y()(k.name,{length:C})}),("ingredient"===g||"log"===g)&&(0,i.BX)("div",{className:"fr",css:(0,l.iv)(_templateObject5()),children:["(",(0,i.tZ)(Amount,{amount:c}),(0,i.tZ)(UnitInput,{item:r,unit:b}),")"]}),"unit"===g&&(0,i.tZ)("div",{className:"fr ml5",css:(0,l.iv)(_templateObject6(),"PROTEIN"===b?F.O9.blue:F.O9.green),children:(0,i.tZ)("div",{css:(0,l.iv)(_templateObject7()),children:(0,i.tZ)(Amount,{amount:c})})})]}),(0,i.tZ)("div",{children:(0,i.tZ)(Tags,{tags:k.tags})}),!v&&!f&&m&&(0,i.tZ)("div",{className:"fr",children:(0,i.tZ)("div",{className:"mt5",children:renderMacros(r,m)})}),"log"===r.type&&(null===(n=r.profile)||void 0===n?void 0:n.enablePlanning)&&(0,i.tZ)(ConsumeButton,{item:r,dispatch:o})]})]})})};var eN={src:"/_next/static/media/pencil.d4f50524.svg",height:16,width:16,blurWidth:0,blurHeight:0};let spawnInstanceEditModal=(e,t)=>{let{id:n,type:i}=e;"food"===i?(t("setFoodToUpdate",n),t("openFoodFormModal")):"recipe"===i?t("openRecipeFormModal",n):"log"===i||"ingredient"===i?t("openItemModal",e):"unit"===i&&t("openUnitModal",e)};function UpdateButton_templateObject(){let e=(0,a._)(["\n        width: 42px;\n        height: 42px;\n        margin-right: 10px !important;\n      "]);return UpdateButton_templateObject=function(){return e},e}let UpdateButton=e=>{let{dispatch:t,item:n}=e,{type:o}=n,r=["ingredient","log","unit"].includes(o);return(0,i.BX)("button",{"data-id":"update-button",css:(0,l.iv)(UpdateButton_templateObject()),type:"button",className:"background mr5",onClick:()=>spawnInstanceEditModal(n,t),children:[r&&(0,i.tZ)(HiddenInput,{}),(0,i.tZ)(K.E,{width:22,height:22,alt:"Pencil",src:eN})]})};function Item_templateObject(){let e=(0,a._)(["\n    margin: 20px auto;\n  "]);return Item_templateObject=function(){return e},e}function Item_templateObject1(){let e=(0,a._)(["\n    text-decoration: line-through;\n    opacity: 0.5;\n  "]);return Item_templateObject1=function(){return e},e}let Item=e=>{var t;let{dispatch:n}=(0,C.bI)(),{item:o}=e,{id:r,onDelete:a,type:c}=o,s=(0,l.iv)(Item_templateObject()),d=(0,l.iv)(Item_templateObject1());return(0,i.tZ)("div",{css:[s,o.consumed&&(null===(t=o.profile)||void 0===t?void 0:t.enablePlanning)&&d],className:"w100 item item-".concat(c),children:(0,i.BX)("div",{className:"fr",children:[(0,i.tZ)(Meta,{item:o,dispatch:n}),(0,i.tZ)("div",{className:"fr",children:(0,i.BX)("div",{className:"fr",children:[(0,i.tZ)(UpdateButton,{item:o,dispatch:n}),a&&(0,i.tZ)(DeleteButton,{id:r,onDelete:a})]})})]})})};var eZ=n(86026);let eS=["Please specify a unit"," Please specify a valid amount"],LogItem=e=>{let{log:t,profile:n}=e,{alias:o,amount:r,barcode:a,consumed:l,createdAt:c,id:s,meal:d,type:u,unit:m}=t,p=t.logToFood,h=t.logToRecipe,g=(0,eZ.T)(p||h,eZ.a),b=(null==h?void 0:h.name)||(null==p?void 0:p.name)||"";return(0,i.tZ)(Item,{item:{alias:o,amount:r,barcode:a,basicFood:t.basicFood,childRecipe:null,consumed:l,createdAt:c,food:p,id:s,meal:d,name:b,onDelete:()=>{deleteLogOnCloud(s,()=>{})},onUpdate:(e,t,n,i,o)=>new Promise((r,a)=>{if(null===i)H.ZP.error("Please mark the log as consumed or not"),a("Please mark the log as consumed or not");else if(t){if(n)return updateLogOnCloud({pk_columns:{id:e},set:{amount:n,consumed:i,meal:o,unit:t}},()=>{r("Success!")});{let e=eS[1];H.ZP.error(e),a(e)}}else{let e=eS[0];H.ZP.error(e),a(e)}}),profile:n,recipe:h,src:a?V.src:g,type:u,unit:m}})};var eB={src:"/_next/static/media/calculator.00896922.svg",height:512,width:512,blurWidth:0,blurHeight:0},eT={src:"/_next/static/media/edit.aac9bd0e.svg",height:512,width:512,blurWidth:0,blurHeight:0},ex={src:"/_next/static/media/food.78d03985.svg",height:600,width:600,blurWidth:0,blurHeight:0},ej={src:"/_next/static/media/foodbowl.8fdee5b4.svg",height:512,width:512,blurWidth:0,blurHeight:0},eM={src:"/_next/static/media/mortarboard.e8856edb.svg",height:512,width:512,blurWidth:0,blurHeight:0},eP={src:"/_next/static/media/recipe.aab03a9a.svg",height:600,width:600,blurWidth:0,blurHeight:0},eI={src:"/_next/static/media/sunrise.54df953e.svg",height:512,width:512,blurWidth:0,blurHeight:0},eF=n(98905);function Shell_templateObject(){let e=(0,a._)(["\n    margin-bottom: 50px;\n    margin-top: 50px;\n    width: 100%;\n  "]);return Shell_templateObject=function(){return e},e}function Shell_templateObject1(){let e=(0,a._)(["\n    margin-top: 50px;\n    width: 95%;\n  "]);return Shell_templateObject1=function(){return e},e}function Shell_templateObject2(){let e=(0,a._)(["\n    margin-bottom: 10px;\n    > button,\n    a.button {\n      border-radius: 5px;\n      font-size: 14px;\n      margin-left: 10px;\n      padding: 7.5px 10px;\n      position: relative;\n    }\n  "]);return Shell_templateObject2=function(){return e},e}function Shell_templateObject3(){let e=(0,a._)(["\n    width: 100%;\n    button,\n    a.button {\n      border: 1px solid ",";\n      flex: 1;\n      font-size: 1rem;\n      margin: 10px 5px;\n      position: relative;\n\n      @media (max-width: ","px) {\n        min-width: 100%;\n      }\n    }\n  "]);return Shell_templateObject3=function(){return e},e}function Shell_templateObject4(){let e=(0,a._)(["\n    margin-right: 5px;\n  "]);return Shell_templateObject4=function(){return e},e}function Shell_templateObject5(){let e=(0,a._)(["\n          color: ",";\n          font-size: 1.5rem;\n          font-weight: 700;\n          margin-top: 15px;\n        "]);return Shell_templateObject5=function(){return e},e}function Shell_templateObject6(){let e=(0,a._)(["\n          font-size: 1.2rem;\n          font-weight: 300;\n          margin-top: 10px;\n        "]);return Shell_templateObject6=function(){return e},e}function Shell_templateObject7(){let e=(0,a._)(["\n                  white-space: nowrap;\n                "]);return Shell_templateObject7=function(){return e},e}let Shell=e=>{let{profile:t}=e,{dispatch:n}=(0,C.bI)(),o=(0,l.iv)(Shell_templateObject()),r=(0,l.iv)(Shell_templateObject1()),a=(0,l.iv)(Shell_templateObject2()),c=(0,l.iv)(Shell_templateObject3(),F.O9.lightgrey,F.md),s=(0,l.iv)(Shell_templateObject4());return(0,i.BX)("div",{id:"Shell",css:o,className:"fcc",children:[(0,i.tZ)(K.E,{width:70,height:70,src:eI,alt:"sun"}),(0,i.BX)("div",{css:(0,l.iv)(Shell_templateObject5(),F.O9.black),children:["It","'","s a new day!"]}),(0,i.tZ)("div",{css:(0,l.iv)(Shell_templateObject6()),children:"Here are some things to do"}),t.showCalories&&(0,i.BX)("div",{css:r,className:"fc",children:[(0,i.BX)("div",{css:a,className:"fr",children:[(0,i.tZ)(K.E,{width:40,height:40,src:eB,alt:"Calculator"}),(0,i.BX)("div",{className:"ml15",children:["Set calorie ","&"," protein goals"]}),(0,i.tZ)("button",{className:"reset pink ml10",type:"button",onClick:()=>n("openTargetModal"),children:"Here"})]}),(0,i.tZ)(eF.i,{color:"background",children:(0,i.BX)("div",{className:"fr",children:[(0,i.tZ)("strong",{css:s,children:"Remember: "})," Logs reset each day"]})})]}),(0,i.BX)("div",{css:r,className:"fc",children:[(0,i.BX)("div",{css:a,className:"fr",children:[(0,i.tZ)(K.E,{width:40,height:40,src:ej,alt:"Food"}),(0,i.tZ)("div",{className:"ml15",children:"Add a log"})]}),(0,i.BX)("div",{css:c,className:"fr wrap",children:[(0,i.BX)("button",{type:"button",onClick:()=>{n("openModal")},children:[(0,i.tZ)(K.E,{width:30,height:30,src:E,alt:"search"}),(0,i.tZ)(HiddenInput,{}),(0,i.tZ)("div",{className:"ml10",children:"Search"})]}),(0,i.BX)("button",{type:"button",onClick:()=>{n("openBarcodeModal")},children:[(0,i.tZ)(K.E,{width:30,height:30,src:R,alt:"Barcode"}),(0,i.tZ)("div",{className:"ml10",children:"Barcode"})]}),t.showCalories&&(0,i.BX)("button",{type:"button",onClick:()=>{n("openQuickAddModal")},children:[(0,i.tZ)(K.E,{width:30,height:30,src:A,alt:"search"}),(0,i.tZ)(HiddenInput,{type:"text",inputMode:"decimal"}),(0,i.tZ)("div",{className:"ml10",css:(0,l.iv)(Shell_templateObject7()),children:"Quick Add"})]}),t.showCalories&&(0,i.BX)("button",{type:"button",onClick:()=>{n("openExerciseModal")},children:[(0,i.tZ)(K.E,{width:30,height:30,src:L,alt:"search"}),(0,i.tZ)("div",{className:"ml10",children:"Exercise"})]})]}),!isMobile()&&(0,i.tZ)("div",{className:"w100",children:(0,i.tZ)(eF.i,{color:"blue",children:(0,i.BX)("div",{children:[(0,i.tZ)("strong",{children:"Tip:"})," To log your food even faster, check out"," ",(0,i.BX)("button",{className:"empty inline",onClick:()=>n("openHelpModal"),children:[(0,i.tZ)("strong",{children:(0,i.tZ)("u",{children:"our keyboard shortcuts"})}),"."]})]})})}),t.showCalories&&(0,i.tZ)(eF.i,{color:"green",children:(0,i.BX)("div",{children:[(0,i.tZ)("strong",{children:"Tip: "})," With"," ",(0,i.tZ)("button",{className:"empty inline mr5",onClick:()=>n("openQuickAddModal"),children:(0,i.tZ)("strong",{children:"Quick Add \uD83D\uDE80"})}),"you can add calories and protein directly."]})})]}),(0,i.BX)("div",{css:r,className:"fc",children:[(0,i.BX)("div",{css:a,className:"fr",children:[(0,i.tZ)(K.E,{width:40,height:40,src:eT,alt:"Pencil"}),(0,i.tZ)("div",{className:"ml15",children:"Create a food or recipe"})]}),(0,i.BX)("div",{css:c,className:"fr wrap",children:[(0,i.BX)("button",{type:"button",onClick:()=>{n("openFoodFormModal")},children:[(0,i.tZ)(K.E,{width:30,height:30,src:ex,alt:"search"}),(0,i.tZ)("div",{className:"ml10",children:"Food"})]}),(0,i.BX)("button",{type:"button",onClick:()=>{n("openRecipeFormModal")},children:[(0,i.tZ)(K.E,{width:30,height:30,src:eP,alt:"Recipe"}),(0,i.tZ)("div",{className:"ml10",children:"Recipe"})]})]})]}),(0,i.BX)("div",{css:r,className:"fc",children:[(0,i.BX)("div",{css:a,className:"fr",children:[(0,i.tZ)(K.E,{width:40,height:40,src:eM,alt:"Mortarboard"}),(0,i.tZ)("div",{className:"ml15",children:"Improve your skills"}),(0,i.tZ)("a",{href:"https://cleanslate.sh/curriculum",target:"_blank",className:"pink button",rel:"noreferrer",children:"Here"})]}),(0,i.tZ)(eF.i,{color:"background",children:(0,i.tZ)("div",{children:"Losing weight is a skill. Let our curriculum teach you how!"})})]})]})};function LogList_templateObject(){let e=(0,a._)(["\n        margin: 0 auto;\n        width: 90%;\n      "]);return LogList_templateObject=function(){return e},e}function LogList_templateObject1(){let e=(0,a._)(["\n                      margin-top: ","px;\n                      background-color: ",";\n                      text-decoration: ",";\n                      opacity: ",";\n                      display: inline-block;\n                      padding: 5px 7.5px;\n                      border-radius: 5px;\n                      font-size: 0.9rem;\n                    "]);return LogList_templateObject1=function(){return e},e}let LogList=e=>{let{logs:t,profile:n}=e,o=W.mM,r=sortByCreatedAt([...t].filter(e=>!o.includes(e.unit))),a=X()(r,"meal"),c={Breakfast:!0,Dinner:!0,Lunch:!0,Snack:!0};Object.keys(a).map(e=>{let t=a[e].reduce((e,t)=>!!t.consumed,!0);c[e]=t});let mapMealToColor=e=>"Breakfast"===e?F.O9.pink:"Lunch"===e?F.O9.green:"Dinner"===e?F.O9.blue:F.O9.yellow;return(0,i.tZ)("div",{css:(0,l.iv)(LogList_templateObject()),children:t.length>0?Object.keys(a).sort((e,t)=>G[e]-G[t]).map((e,t)=>{let o=a[e];return(0,i.BX)("div",{children:[n.enablePlanning&&(0,i.tZ)("div",{css:(0,l.iv)(LogList_templateObject1(),0===t?20:0,mapMealToColor(e),c[e]?"line-through":void 0,c[e]?.5:1),children:e}),o.map(e=>(0,i.tZ)(LogItem,{log:e,profile:n,renderUnit:!0},e.id))]},e)}):profileIsLoaded(n)?(0,i.tZ)(Shell,{profile:n}):(0,i.tZ)("div",{className:"w100 h100",children:(0,i.tZ)(Spinner,{})})})},zipObject=(e,t)=>e.reduce((e,n,i)=>(e[n]=t[i],e),{});function Divider_templateObject(){let e=(0,a._)(["\n    background-color: ",";\n    height: ","px;\n    width: 100%;\n  "]);return Divider_templateObject=function(){return e},e}let Divider=e=>{let{className:t,height:n,styles:o}=e,r=(0,l.iv)(Divider_templateObject(),F.O9.background,n||2);return(0,i.tZ)("div",{className:t,css:[r,o]})},getTotals=e=>({CALORIE:e.CALORIE.reduce((e,t)=>t.amount+e,0),EXERCISE:e.EXERCISE.reduce((e,t)=>t.amount+e,0),PROTEIN:e.PROTEIN.reduce((e,t)=>t.amount+e,0)}),getUnitLogs=e=>{let t=W.mM,n=e.filter(e=>t.includes(e.unit)),i=n.filter(e=>"CALORIE"===e.unit),o=n.filter(e=>"PROTEIN"===e.unit),r=n.filter(e=>"EXERCISE"===e.unit);return{CALORIE:i,EXERCISE:r,PROTEIN:o}},getCombinedLogs=e=>{let t=getUnitLogs(e),n=getTotals(t),i=new Log;i.amount=n.CALORIE,i.unit="CALORIE";let o=new Log;o.amount=n.PROTEIN,o.unit="PROTEIN";let r=new Log;return r.amount=n.EXERCISE,r.unit="EXERCISE",[i,o,r]},getCount=e=>{let t=W.mM;return e.filter(e=>t.includes(e.unit)).length},deleteLogsOnCloud=(e,t)=>(0,f.a)().then(n=>{n.request((0,g.O)(q.kR),{id:e}).then(e=>{let n=e.delete_logs.returning.map(e=>e.id);y.h.dispatch("removeLogsById",n),t()})}).catch(e=>{(0,p.S)(e)}),formatUnitAsTitle=e=>"CALORIE"===e?capitalize(e+"S"):capitalize(e);var eR={src:"/_next/static/media/calorie.603efe2d.svg"},eL={src:"/_next/static/media/fastexercise.770aaf4b.svg"},eA={src:"/_next/static/media/protein.6f2ead17.svg"};let selectUnitImage=e=>{if("CALORIE"===e)return eR.src;if("PROTEIN"===e)return eA.src;if("EXERCISE"===e)return eL.src;throw Error("Error: selectUnitImage: ".concat(e))},UnitItem=e=>{let{log:t}=e,{amount:n,createdAt:o,id:r,unit:a}=t,{data:l}=(0,C.bI)("data"),c=l.profiles[0].logs,s="Quick Add: ".concat(formatUnitAsTitle(a)),d=selectUnitImage(a);return(0,i.tZ)(Item,{item:{alias:null,amount:n,barcode:null,basicFood:null,childRecipe:null,consumed:null,createdAt:o,food:null,id:r,meal:null,name:s,onDelete:()=>{if(W.mM.includes(a)){let e=c.filter(e=>e.unit===a).map(e=>e.id);deleteLogsOnCloud(e,()=>{})}},onUpdate:null,profile:null,recipe:null,src:d,type:"unit",unit:a}})};function UnitList_templateObject(){let e=(0,a._)(["\n        margin: 0 auto;\n        width: 90%;\n      "]);return UnitList_templateObject=function(){return e},e}let UnitList=e=>{let{logs:t}=e,n=zipObject(W.mM,[1,2,3]);return(0,i.BX)("div",{css:(0,l.iv)(UnitList_templateObject()),children:[getCombinedLogs(t).sort((e,t)=>n[e.unit]-n[t.unit]).filter(e=>0!==e.amount).map(e=>(0,i.tZ)(UnitItem,{log:e},e.id)),getCount(t)>=1&&(0,i.tZ)(Divider,{height:2,className:"mt25 mb20"})]})};var eE=n(43074);let getDispatch=()=>y.h.dispatch;var eD=n(71612),eX=n(66843),eW=n(54759),eU=n(5648),ez=n.n(eU);let isMobileSafari=()=>{let e=window.navigator.userAgent,t=!!e.match(/iPad/i)||!!e.match(/iPhone/i),n=!!e.match(/WebKit/i),i=t&&n&&!e.match(/CriOS/i);return i||isIpad()},isNumeric=e=>!1===isNaN(e);var eG=n(39519),eH=n.n(eG);let eV={RAW:"RAW"};function scan_templateObject(){let e=(0,a._)(["\n          width: 90%;\n          height: 100%;\n          max-width: 400px;\n        "]);return scan_templateObject=function(){return e},e}function scan_templateObject1(){let e=(0,a._)(["\n            width: 100% !important;\n            margin: 20px auto !important;\n            margin-bottom: ",";\n          "]);return scan_templateObject1=function(){return e},e}function scan_templateObject2(){let e=(0,a._)(["\n            width: 100%;\n            max-width: 400px;\n            max-height: ",";\n            margin: 0px auto;\n          "]);return scan_templateObject2=function(){return e},e}let eq={START:"START",STOP:"STOP"},eQ={HEIGHT:430,WIDTH:320},eK=eQ.WIDTH,eJ=eQ.HEIGHT,eY=0,e$=0,e0=0;let Scan=class Scan extends r.Component{componentDidMount(){this.canvasElement=document.getElementById("canvas"),this.canvas=this.canvasElement.getContext("2d"),this.canvasElement.width=eQ.WIDTH,this.canvasElement.height=eQ.HEIGHT}render(){if(this.state.resultOpen){let e=this.renderQrCodeResult();this.props.onScan(e)}return(0,i.BX)("div",{className:"fcs",css:(0,l.iv)(scan_templateObject()),children:[(0,i.tZ)("button",{className:"purple bold",css:(0,l.iv)(scan_templateObject1(),this.state.neverScanned?"0px !important":"20px !important"),onTouchStart:this.initializeAudio,onClick:this.onBtnClickHandler,style:this.startStyle(),children:this.state.scanning?"Stop scan":"Scan barcode"}),this.state.neverScanned&&(0,i.tZ)(eF.i,{color:"blue",children:(0,i.tZ)("div",{children:"This barcode scanner uses the Open Food Facts database. Because this database is a free service, it may not have every food. Just a heads up!"})}),(0,i.tZ)("canvas",{css:(0,l.iv)(scan_templateObject2(),this.state.neverScanned?"0px":"400px"),id:"canvas"})]})}componentWillUnmount(){!0===this.state.scanning&&this.stopScan()}constructor(e){super(e),this.initWorker=()=>{this.qrworker=new Worker(this.state.worker+"Worker.js"),this.qrworker.onmessage=async e=>{if(null!=e.data){this.qrworker.terminate();let t=e.data;this.stopScan();let n=t.data,i=e.data.ms,o=eV.RAW;this.setState({barcode:n,codeType:o,milliseconds:i,rawCode:n,resultOpen:!0})}}},this.startScan=()=>{this.initWorker(),this.fpsTimestamp=new Date,this.setState({barcode:"",btnText:eq.STOP,codeType:eV.RAW,neverScanned:!1,rawCode:"",resultOpen:!1,scanning:!0,transformToggle:!0}),navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:"environment"}}).then(e=>{this.video.srcObject=e,this.video.setAttribute("playsinline","true"),this.video.play(),requestAnimationFrame(this.tick)}).catch(e=>{this.stopScan(),alert(e)})},this.initializeAudio=()=>{window.AudioContext=window.AudioContext||window.webkitAudioContext,window.AudioContext&&(window.audioContext=new window.AudioContext);let fixAudioContext=function(){if(window.audioContext){let e=window.audioContext.createBuffer(1,1,22050),t=window.audioContext.createBufferSource();t.buffer=e,t.connect(window.audioContext.destination),t.start?t.start(0):t.play?t.play(0):t.noteOn&&t.noteOn(0)}document.removeEventListener("touchstart",fixAudioContext),document.removeEventListener("touchend",fixAudioContext)};document.addEventListener("touchstart",fixAudioContext),document.addEventListener("touchend",fixAudioContext)},this.stopScan=()=>{this.setState({boxShadow:"0 4px 8px 0 rgba(0, 0, 0, .2), 0 6px 20px 0 rgba(0, 0, 0, .19)",btnText:eq.START,scanning:!1}),this.video.pause(),this.video.srcObject&&(this.video.srcObject.getVideoTracks().forEach(e=>e.stop()),this.video.srcObject=null)},this.tick=e=>{this.video.readyState===this.video.HAVE_ENOUGH_DATA?(this.state.fpsOn&&(e0=1e3/(e-this.fpsTimestamp),this.fpsTimestamp=e),this.canvas.drawImage(this.video,eY,e$,eK,eJ,0,0,eK,eJ),this.state.bw&&this.monochromize(),this.state.crosshair&&this.drawCrosshair(),this.state.fpsOn&&this.drawFPS(e0),this.state.scanning&&requestAnimationFrame(this.tick),this.decodeQR&&this.recognizeQRcode(e)):this.state.scanning&&requestAnimationFrame(this.tick)},this.monochromize=()=>{let e=this.canvas.getImageData(0,0,this.canvasElement.width,this.canvasElement.height),t=e.data;for(let e=0;e<t.length;e+=4){let n=.3*t[e]+.59*t[e+1]+.11*t[e+2];t[e]=n,t[e+1]=n,t[e+2]=n}this.canvas.putImageData(e,0,0)},this.drawCrosshair=()=>{this.canvas.fillStyle="rgba(255,255,255,0.4)";let e=new Path2D("M77.125 148.02567c0-3.5774 2.73862-6.27567 6.37076-6.27567H119V117H84.0192C66.50812 117 52 130.77595 52 148.02567V183h25.125v-34.97433zM237.37338 117H202v24.75h35.18494c3.63161 0 6.69006 2.69775 6.69006 6.27567V183H269v-34.97433C269 130.77595 254.88446 117 237.37338 117zM243.875 285.4587c0 3.5774-2.73863 6.27567-6.37076 6.27567H202V317h35.50424C255.01532 317 269 302.70842 269 285.4587V251h-25.125v34.4587zM83.49576 291.73438c-3.63213 0-6.37076-2.69776-6.37076-6.27568V251H52v34.4587C52 302.70842 66.50812 317 84.0192 317H119v-25.26563H83.49576z");this.canvas.fill(e)},this.recognizeQRcode=e=>{if(e-this.oldTime>this.scanRate){let t;this.oldTime=e,t=!0===this.state.crosshair?this.canvas.getImageData(53,117,217,200):this.canvas.getImageData(0,0,this.canvasElement.width,this.canvasElement.height),this.qrworker.postMessage({height:t.height,width:t.width}),this.qrworker.postMessage(t,[t.data.buffer])}},this.drawFPS=e=>{this.canvas.font="normal 16pt Arial",this.canvas.fillStyle="#f8ff4c",this.canvas.fillText(Math.round(e)+" fps",10,eQ.HEIGHT-16)},this.onBtnClickHandler=e=>{e.preventDefault(),this.state.scanning?this.stopScan():this.startScan()},this.startStyle=()=>{let e={textAlign:"center",width:64};return this.state.scanning?{backgroundColor:"red",...e}:{backgroundColor:"",...e}},this.renderQrCodeResult=()=>this.state.barcode,this.video=document.createElement("video"),this.video.onplaying=()=>{eY=(this.video.videoWidth-eQ.WIDTH)/2,e$=(this.video.videoHeight-eQ.HEIGHT)/2},this.state={btnText:eq.START,bw:this.props.bw,codeType:eV.RAW,crosshair:this.props.crosshair,fpsOn:this.props.fps,neverScanned:!0,onScan:this.props.onScan,openModal:!1,rawCode:"",scanning:!1,transformToggle:!0,worker:this.props.worker},this.decodeQR=this.props.decode,this.scanRate=this.props.scanRate,this.qrworker=null,this.oldTime=0}};Scan.propTypes={bw:eH().bool,crosshair:eH().bool,decode:eH().bool,fps:eH().bool,scanRate:eH().number,worker:eH().string},Scan.defaultProps={bw:!1,crosshair:!0,decode:!0,fps:!1,scanRate:250,worker:"wasm"};var e1={src:"/_next/static/media/check.e08f44ed.svg",height:16,width:16,blurWidth:0,blurHeight:0};function SubmitButton_templateObject(){let e=(0,a._)(["\n    height: 50px;\n    margin-left: auto;\n    margin-top: 10px;\n    width: 60px;\n  "]);return SubmitButton_templateObject=function(){return e},e}let SubmitButton=e=>{let{className:t,onClick:n,submit:o}=e,r=(0,l.iv)(SubmitButton_templateObject());return(0,i.tZ)("button",{id:"SubmitButton",onClick:()=>{n&&n()},css:r,className:"success ".concat(t),type:o?"submit":"button",children:(0,i.tZ)(K.E,{width:30,height:30,src:e1,alt:"Check"})})},ButtonPanel=e=>{let{showSubmit:t,submit:n}=e;return(0,i.tZ)("div",{className:"w100 fre mb20",children:t&&(0,i.tZ)(SubmitButton,{className:"mt20",submit:!1,onClick:n})})};function FractionInput_templateObject(){let e=(0,a._)(["\n    height: 41px;\n    margin-left: 10px;\n  "]);return FractionInput_templateObject=function(){return e},e}let FractionInput=e=>{let{className:t,inputRef:n,placeholder:o,setValue:r,value:a}=e,c=(0,l.iv)(FractionInput_templateObject());return(0,i.BX)("div",{className:"".concat(t," fr w100"),children:[(0,i.tZ)("input",{id:"FractionInputInput",onChange:e=>{r(e.target.value)},ref:n,required:!0,step:"any",type:"text",inputMode:"decimal",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",value:a,placeholder:o||""}),isMobile()&&(0,i.BX)("button",{onClick:()=>{r(a+"/")},css:c,className:"pink",type:"button",children:[(0,i.tZ)(HiddenInput,{inputMode:"decimal"}),"/"]})]})},getPrettyUnits=e=>{let t="food"===e.type&&((null==e?void 0:e.countToTbsp)||(null==e?void 0:e.tbspToGram))||"recipe"===e.type&&(null==e?void 0:e.countToTbsp)?W.ML:[],n=zipObject(t,t),i="food"===e.type&&(e.caloriesPerGram||e.countToGram)||"recipe"===e.type&&e.countToGram?W.Nc:[],o=zipObject(i,i),r="recipe"===e.type||"food"===e.type&&(null==e?void 0:e.countName)||"food"===e.type&&(e.caloriesPerCount||0===e.caloriesPerCount)&&(e.proteinPerCount||0===e.proteinPerCount)?["COUNT"]:[],a=zipObject(r,r);a.COUNT&&(a.COUNT=e.countName||W.Ae);let l="food"===e.type&&(e.caloriesPerCount||0===e.caloriesPerCount)&&(e.proteinPerCount||0===e.proteinPerCount)&&e.servingPerContainer?["CONTAINER"]:[],c=zipObject(l,l);return c.COUNT&&(c.COUNT=e.countName||W.JX),[{...a,...c},o,n]};var e2=n(38676);function MealInput_templateObject(){let e=(0,a._)(["\n          flex-wrap: nowrap;\n          button {\n            &.active {\n              background-color: "," !important;\n              border-color: "," !important;\n            }\n          }\n          button > div {\n            font-size: 0.8rem !important;\n          }\n        "]);return MealInput_templateObject=function(){return e},e}let MealInput=e=>{let{meal:t,setMeal:n}=e;return(0,i.tZ)("div",{className:"mt10 w100 mb10",children:(0,i.tZ)(e2.m,{css:(0,l.iv)(MealInput_templateObject(),F.O9.pink,F.O9.pink),selected:t,tabs:{Breakfast:{image:"",title:"Breakfast"},Lunch:{image:"",title:"Lunch"},Dinner:{image:"",title:"Dinner"},Snack:{image:"",title:"Snack"}},onSelect:e=>{n(e)}})})};function Select_templateObject(){let e=(0,a._)(["\n    button {\n      flex: 1;\n      font-weight: 500 !important;\n      margin: 5px;\n      text-transform: uppercase;\n    }\n  "]);return Select_templateObject=function(){return e},e}function Select_templateObject1(){let e=(0,a._)(["\n    background-color: "," !important;\n    &:hover,\n    &:focus {\n      background-color: "," !important;\n    }\n  "]);return Select_templateObject1=function(){return e},e}let Select=e=>{let{currentOption:t,focus:n,onChange:o,optionDictionary:a}=e,c=r.useRef(null);r.useEffect(()=>{c.current&&n&&c.current.focus()},[n]);let s=(0,l.iv)(Select_templateObject()),d=(0,l.iv)(Select_templateObject1(),F.O9.blue,F.O9.darkblue);return(0,i.tZ)("div",{css:s,ref:c,className:"frc w100 wrap",children:a.map((e,n)=>(0,i.tZ)("div",{className:"w100 frc",children:Object.keys(e).map(n=>(0,i.tZ)("button",{type:"button",id:"Select-".concat(n),onClick:()=>{o(n)},css:t===n?d:"",className:"background bold",children:e[n].toLowerCase()},n))},n))})},InputFields=e=>{let{amount:t,enablePlanning:n,meal:o,selectedItem:a,setAmount:l,setMeal:c,setUnit:s,unit:d}=e,u=r.useRef(null);return r.useEffect(()=>{if(null==a?void 0:a.name){var e;null===(e=u.current)||void 0===e||e.focus()}},[null==a?void 0:a.name]),(0,i.BX)("div",{className:"w100",children:[(0,i.tZ)(FractionInput,{inputRef:u,className:"m20",value:t||"",setValue:l,placeholder:"Enter amount..."}),a&&(0,i.tZ)(Select,{focus:!1,currentOption:d,optionDictionary:getPrettyUnits(a),onChange:e=>{s(e)}}),n&&(0,i.tZ)(MealInput,{meal:o,setMeal:c})]})};var e5=n(84621);let addFoodToCloud=(e,t)=>(0,f.a)().then(n=>{n.request((0,g.O)(e5.ec),{object:e}).then(e=>{t(e.insert_foods_one.id)})}).catch(e=>(0,p.S)(e));let Ingredient=class Ingredient{constructor(){this.basicFood=(0,U.V)()||null,this.childRecipe=(0,U.V)()||null,this.food=(0,U.V)()||null,this.recipe=(0,U.V)(),this.id=(0,U.V)(),this.updatedAt=new Date,this.createdAt=new Date,this.type="ingredient"}};let addIngredient=(e,t,n,i,o)=>{(null==e?void 0:e.type)!=="food"||o||(e.category="Food",e.group="Custom",e.basicFoodId=null);let r=new Ingredient;return r.amount=n,r.barcode=t,r.basicFood=o,r.childRecipe=(null==e?void 0:e.type)==="recipe"?e.id:null,r.food=(null==e?void 0:e.type)==="food"?e.id:null,r.ingredientToChildRecipe=(null==e?void 0:e.type)==="recipe"?e:null,r.ingredientToFood=(null==e?void 0:e.type)==="food"?e:null,r.ingredientToProfile=new I.NZ,r.unit=i,r},addLogToCloud=(e,t)=>{(0,f.a)().then(n=>{n.request((0,g.O)(q.K6),{object:e}).then(e=>{y.h.dispatch("addLogs",[e.insert_logs_one]),t()})}).catch(e=>{(0,p.S)(e)})},addLog=(e,t,n,i,o,r,a,l,c,s)=>{n&&i&&(e("closeModal"),e("closeQuickAddModal"),e("closeBarcodeModal"),addLogToCloud({alias:t,amount:n,barcode:o,basicFood:"food"===l&&c?s:void 0,consumed:!r,food:"food"!==l||c?void 0:s,meal:a,recipe:"recipe"===l?s:void 0,unit:i},()=>{}))},submitEditor=(e,t,n,i,o,r,a,l,c,s)=>{let d=c&&"food"===c.type&&c.basicFoodId;if(!n)return H.ZP.error("Please specify a valid amount"),!1;if(!i)return H.ZP.error("Please specify a valid unit"),!1;if(!c&&!o)return H.ZP.error("Please specify a valid food or recipe"),!1;if("ingredient"===e){let e=addIngredient(c,o,n,i,"string"==typeof d?d:null);return l("saveIngredient",e),!0}if(s&&"log"===e)return addFoodToCloud({caloriesPerCount:null==s?void 0:s.caloriesPerCount,category:"Food",containerName:"Container",countName:"Serving",countToGram:null==s?void 0:s.countToGram,countToTbsp:null==s?void 0:s.countToTbsp,group:"Custom",name:s.name,preferredVolumeUnit:"TBSP",preferredWeightUnit:"GRAM",proteinPerCount:null==s?void 0:s.proteinPerCount,servingPerContainer:null==s?void 0:s.servingPerContainer},e=>(H.ZP.success("Created the ".concat(s.name," custom food!")),addLog(l,t,n,i,null,r,a,"food",!1,e),!0)),!0;if("log"===e&&!s){let e=c?c.id:void 0,s=c?c.type:"food";return addLog(l,t,n,i,o,r,a,s,!!d,e),!0}return!1};function BarcodeModal_templateObject(){let e=(0,a._)(["\n          margin: 0px auto;\n          margin-top: 20px;\n          width: 90%;\n        "]);return BarcodeModal_templateObject=function(){return e},e}function BarcodeModal_templateObject1(){let e=(0,a._)(["\n                margin-left: 15px;\n                font-size: 1rem;\n                font-weight: 400;\n              "]);return BarcodeModal_templateObject1=function(){return e},e}let BarcodeModal=e=>{let{profile:t,type:n}=e,{enablePlanning:o}=t,a=getDispatch(),[c,s]=(0,r.useState)(null),[d,u]=(0,r.useState)(""),[m,p]=(0,r.useState)(z),[h,g]=(0,r.useState)(!1),[b,f]=(0,r.useState)("GRAM"),[v,w]=(0,r.useState)(!1),k=(0,eW.D)(100,e=>{w(!0),eD.Z.get("https://world.openfoodfacts.org/api/v0/product/".concat(e,".json")).then(t=>{if("product found"!==t.data.status_verbose){a("closeBarcodeModal"),H.ZP.error("Matching food not found!");return}let n=t.data.product,{nutriments:i,product_name:o}=n,{proteins_100g:r,proteins_serving:l,serving_quantity:c,serving_size:d}=i;s({calories_per_gram:i["energy-kcal_100g"]/100,calories_per_serving:i["energy-kcal_serving"],code:e,name:o,protein_per_gram:r/100,protein_per_serving:l,serving_quantity:c,serving_size:d})})});(0,r.useEffect)(()=>{(0,O.y)()||isMobile()||k("3017620422003")},[]);let C=ez()(window.navigator.userAgent),y=C.browser,_=String(y.version).replace(",",".").replace(",","."),N=isMobileSafari()&&1==(0,eX.n)("16.0.0",_),Z="Chrome"==y.name&&1==(0,eX.n)("103",_),S="Firefox"==y.name&&1==(0,eX.n)("102",_);if(N||Z||S)return(0,i.tZ)(eF.i,{color:"blue",css:(0,l.iv)(BarcodeModal_templateObject()),children:(0,i.tZ)("div",{children:"For security reasons, this feature is not supported on your version of your browser. Please update to the latest version."})});let B=new Food;return c&&(B.name=c.name,isNumeric(null==c?void 0:c.calories_per_gram)&&isNumeric(null==c?void 0:c.protein_per_gram)&&(B.caloriesPerGram=c.calories_per_gram,B.proteinPerGram=c.protein_per_gram,isNumeric(null==c?void 0:c.calories_per_serving)&&isNumeric(null==c?void 0:c.protein_per_serving)&&(B.countToGram=(0,ev.N)(c.calories_per_serving/c.calories_per_gram,0),B.caloriesPerCount=(0,ev.N)(c.calories_per_gram*B.countToGram,0),B.proteinPerCount=(0,ev.N)(c.protein_per_gram*B.countToGram,0)))),(0,i.tZ)(i.HY,{children:c?(0,i.BX)("div",{children:[(0,i.BX)("div",{className:"w100 fr m20",children:[(0,i.tZ)(K.E,{width:50,height:50,src:V,alt:"Barcode"}),(0,i.tZ)("span",{css:(0,l.iv)(BarcodeModal_templateObject1()),children:capitalize(c.name||"Unknown")})]}),(0,i.tZ)(InputFields,{selectedItem:B,unit:b,setUnit:f,amount:d,setAmount:u,enablePlanning:o,meal:m,setMeal:p}),isNumeric(null==c?void 0:c.calories_per_serving)&&isNumeric(null==c?void 0:c.protein_per_serving)&&"log"===n&&(0,i.BX)("div",{className:"fr",children:[(0,i.tZ)("label",{htmlFor:"customFood",children:"Create a custom food from this scan?"}),(0,i.tZ)("input",{checked:h,onChange:e=>{g(e.target.checked)},id:"customFood",type:"checkbox"})]}),(0,i.tZ)(ButtonPanel,{showSubmit:!!(d&&b),submit:()=>{submitEditor(n,null,Number(d),b,c,o,m,a,"ingredient"===n?B:void 0,h?B:void 0)}})]}):(0,i.tZ)(Scan,{scanRate:250,onScan:e=>!v&&k(e)})})};var e3=n(50713);let calculateBFUsingNavyMethod=(e,t,n,i,o)=>{if("male"===e)return 86.01*Math.log10(n-i)-70.041*Math.log10(t)+36.76;if("female"===e)return 163.205*Math.log10(n+o-i)-97.684*Math.log10(t)-78.387;throw Error("Error: calculateBFUsingNavyMethod: ".concat(JSON.stringify({height:t,hip:o,neck:i,sex:e,waist:n})))},BodyFatPercentageForm=()=>{let[e,t]=r.useState(""),[n,o]=r.useState(""),[a,l]=r.useState("male"),[c,s]=r.useState(""),[d,u]=r.useState(""),[m,p]=r.useState(""),[h,g]=r.useState(0);return(0,i.tZ)("div",{className:"target-form",children:(0,i.tZ)("div",{children:(0,i.BX)("form",{onSubmit:t=>{t.preventDefault();let i=12*Number(e)+Number(n),o=calculateBFUsingNavyMethod(a,i,Number(c),Number(d),Number(m));g(o)},children:[h>0&&(0,i.tZ)(eF.i,{color:"green",children:(0,i.BX)("div",{children:["Your body fat percentage is"," ",(0,i.BX)("span",{children:[(0,ev.N)(h,1),"%"]})]})}),(0,i.BX)("div",{className:"fc",children:[(0,i.BX)("label",{children:["Sex",(0,i.tZ)("span",{className:"tag info",children:"Assigned at birth"})]}),(0,i.BX)("div",{className:"fr",children:[(0,i.BX)("label",{className:"fr",children:[(0,i.tZ)("input",{type:"radio",value:"male",onChange:()=>l("male"),checked:"male"===a}),(0,i.tZ)("span",{children:"Male"})]}),(0,i.BX)("label",{className:"fr",children:[(0,i.tZ)("input",{type:"radio",value:"female",onChange:()=>l("female"),checked:"female"===a}),(0,i.tZ)("span",{children:"Female"})]})]})]}),(0,i.BX)("div",{className:"section target-form-height",children:[(0,i.BX)("div",{children:[(0,i.tZ)("label",{htmlFor:"feet",children:"Feet"}),(0,i.tZ)("input",{required:!0,id:"feet",onChange:e=>{t(e.target.value)},value:e,type:"number",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",step:"any"})]}),(0,i.BX)("div",{children:[(0,i.tZ)("label",{htmlFor:"inches",children:"Inches"}),(0,i.tZ)("input",{required:!0,id:"inches",onChange:e=>{o(e.target.value)},value:n,type:"number",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",step:"any"})]})]}),(0,i.BX)("div",{className:"section target-form-measurements",children:[(0,i.BX)("div",{className:"form-alert expand information",children:["How to measure:",(0,i.BX)("a",{target:"_blank",rel:"noreferrer",href:"https://www.youtube.com/watch?v=CdtIb5VojUQ",children:[" ","Man"]}),"|",(0,i.BX)("a",{target:"_blank",rel:"noreferrer",href:"https://www.youtube.com/watch?v=bATNkP4w-jk",children:[" ","Woman"]})]}),(0,i.BX)("div",{children:[(0,i.BX)("label",{htmlFor:"waist",children:["Waist",(0,i.tZ)("span",{className:"tag info",children:"Inches"})]}),(0,i.tZ)("input",{id:"waist",onChange:e=>{s(e.target.value)},value:c,type:"number",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",step:"any"})]}),(0,i.BX)("div",{children:[(0,i.BX)("label",{htmlFor:"neck",children:["Neck",(0,i.tZ)("span",{className:"tag info",children:"Inches"})]}),(0,i.tZ)("input",{id:"neck",onChange:e=>{u(e.target.value)},value:d,type:"number",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",step:"any"})]}),"female"===a&&(0,i.BX)("div",{children:[(0,i.tZ)("label",{htmlFor:"hip",children:"Hip (inches)"}),(0,i.tZ)("input",{id:"hip",onChange:e=>{p(e.target.value)},value:m,type:"number",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",step:"any"})]})]}),(0,i.tZ)("button",{type:"submit",className:"purple target-form-submit-button",children:"Calculate body fat %"})]})})})},updateFoodOnCloud=(e,t)=>(0,f.a)().then(n=>{n.request((0,g.O)(e5.L$),e).then(()=>{t()})}).catch(e=>(0,p.S)(e)),convertToNumber=e=>{if(""===e)return null;{let t=Number(e);return isNaN(t)||t===1/0?null:0===t?0:t}},prep=e=>convertToNumber(e);var e4=n(38749),e6=n(40257);let mapTbspToOtherVolumeUnit=(e,t)=>"TBSP"===e?t:"TSP"===e?3*t:"CUP"===e?t/16:"mL"===e?t/.067628:(0,p.S)("The unit entered is not a volume unit!"),getAdjustedVolumeAmount=(e,t)=>{let n=prep(e);return n?"TBSP"===t?n:mapTbspToOtherVolumeUnit(t,n):e},convertToImperialFromGrams=(e,t)=>"LBS"===e?t/453:"OZ"===e?t/453*16:(0,p.S)("The unit entered is not OZ or LBS!"),getAdjustedWeightAmount=(e,t)=>{let n=prep(e);if(!n)return e;if("GRAM"===t)return n;{let e=convertToImperialFromGrams(t,n);return e}};function UnitSelector_templateObject(){let e=(0,a._)(["\n          width: 90px;\n        "]);return UnitSelector_templateObject=function(){return e},e}function UnitSelector_templateObject1(){let e=(0,a._)(["\n            padding: 10px;\n            width: 100px;\n          "]);return UnitSelector_templateObject1=function(){return e},e}function UnitSelector_templateObject2(){let e=(0,a._)(["\n            width: 100px;\n          "]);return UnitSelector_templateObject2=function(){return e},e}function UnitSelector_templateObject3(){let e=(0,a._)(["\n          white-space: nowrap;\n        "]);return UnitSelector_templateObject3=function(){return e},e}let getAmount=e=>e,UnitSelector=e=>{let{amount:t,onChange:n,title:o,unit:a,units:c}=e,[s,d]=r.useState(getAmount(t)),[u,m]=r.useState(a),p="CONTAINER"===c[0];return r.useEffect(()=>{m(a),d(getAmount(t))},[t,a]),(0,i.BX)("div",{className:"fr w100 mt20",children:[(0,i.tZ)("input",{id:"unit-selector-input",value:s,inputMode:"decimal",onChange:e=>{let t=e.target.value;d(t),n(a,t)},className:"mr10",css:(0,l.iv)(UnitSelector_templateObject()),type:"text",placeholder:""})," ",p?(0,i.tZ)("span",{css:(0,l.iv)(UnitSelector_templateObject1()),children:"servings"}):(0,i.tZ)("select",{id:"unit-selector-select",value:u,onChange:e=>{let t=e.target.value;m(t),n(t,s)},className:"mr10",css:(0,l.iv)(UnitSelector_templateObject2()),children:c.map(e=>(0,i.tZ)("option",{value:e,children:"".concat(e.toLowerCase())},e))}),(0,i.tZ)("span",{className:"ml5",css:(0,l.iv)(UnitSelector_templateObject3()),children:o||(p?"per container ":"per serving")})]})};function CustomFoodForm_templateObject(){let e=(0,a._)(["\n          background-color: ",";\n        "]);return CustomFoodForm_templateObject=function(){return e},e}let CustomFoodForm=e=>{let{food:t}=e,{dispatch:n}=(0,C.bI)(),[o,a]=r.useState((null==t?void 0:t.name)||""),[c,s]=r.useState((null==t?void 0:t.caloriesPerCount)||""),[d,u]=r.useState((null==t?void 0:t.proteinPerCount)||""),[m,p]=r.useState((null==t?void 0:t.servingPerContainer)||""),[h,g]=r.useState((null==t?void 0:t.countToGram)||""),[b,f]=r.useState((null==t?void 0:t.countToTbsp)||""),[v,w]=r.useState((null==t?void 0:t.preferredVolumeUnit)||"TBSP"),[k,y]=r.useState((null==t?void 0:t.preferredWeightUnit)||"GRAM"),[_,O]=r.useState(!0),[N,Z]=r.useState(!0),S=(0,e4.q)(k,prep(h)||0),B=(0,e6.N)(v,prep(b)||0);return r.useEffect(()=>{a((null==t?void 0:t.name)||""),s((null==t?void 0:t.caloriesPerCount)||""),u((null==t?void 0:t.proteinPerCount)||""),p((null==t?void 0:t.servingPerContainer)||""),g((null==t?void 0:t.countToGram)||""),f((null==t?void 0:t.countToTbsp)||""),w((null==t?void 0:t.preferredVolumeUnit)||"TBSP"),y((null==t?void 0:t.preferredWeightUnit)||"GRAM"),_&&(f(getAdjustedVolumeAmount(b,v)),O(!1)),N&&(g(getAdjustedWeightAmount(h,k)),Z(!1))},[t]),(0,i.BX)("form",{onSubmit:e=>{e.preventDefault();let i={caloriesPerCount:prep(c),category:"Food",containerName:(null==t?void 0:t.containerName)||"",countName:(null==t?void 0:t.countName)||"",countToGram:S,countToTbsp:B,group:"Custom",name:o,preferredVolumeUnit:v,preferredWeightUnit:k,proteinPerCount:prep(d),servingPerContainer:prep(m)},close=()=>{n("closeFoodFormModal"),n("closeMenu")};if(null==t?void 0:t.id){let e={pk_columns:{id:t.id},set:{...i}};if(!c)return H.ZP.error("Calories per serving cannot be zero or empty!");if(null==d)return H.ZP.error("Protein per serving cannot be empty!");if(!isNumeric(c))return H.ZP.error("Calorie per serving must be a number!");if(!isNumeric(d))return H.ZP.error("Protein per serving must be a number!");let n=t.countToGram&&!i.countToGram,o=t.countToTbsp&&!i.countToTbsp,r=t.servingPerContainer&&!i.servingPerContainer;(n||o||r)&&alert("When you remove a unit from a custom food, it can break the recipes and the logs if they have stored the custom food with that unit. For example, you have made a log with 500mL of pudding and you remove the tbsp per recipe. Make sure you fix them after this update!"),updateFoodOnCloud(e,()=>close())}else addFoodToCloud(i,()=>n("closeFoodFormModal"))},children:[(0,i.tZ)("div",{className:"group",children:(0,i.BX)("div",{className:"w100",children:[(0,i.tZ)("label",{htmlFor:"name",children:"Food"}),(0,i.tZ)("input",{id:"name",autoCapitalize:"on",autoComplete:"off",autoCorrect:"off",onChange:e=>{a(e.target.value)},placeholder:"Chocolate pudding",required:!0,type:"text",value:o||""})]})}),(0,i.BX)("div",{className:"group",children:[(0,i.BX)("div",{className:"w50",children:[(0,i.BX)("label",{htmlFor:"caloriesPerCount",children:["Calories",(0,i.tZ)("span",{className:"tag pink",children:"per serving"})]}),(0,i.tZ)("input",{id:"caloriesPerCount",onChange:e=>{s(e.target.value)},required:!0,step:"any",type:"text",placeholder:"120",inputMode:"decimal",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",value:c})]}),(0,i.BX)("div",{className:"w50",children:[(0,i.BX)("label",{htmlFor:"proteinPerCount",children:["Protein",(0,i.tZ)("span",{className:"tag pink",children:"per serving"})]}),(0,i.tZ)("input",{id:"proteinPerCount",onChange:e=>{u(e.target.value)},required:!0,step:"any",type:"text",inputMode:"decimal",placeholder:"20",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",value:d})]})]}),(0,i.tZ)(Divider,{height:1,className:"mt20 mb0",styles:(0,l.iv)(CustomFoodForm_templateObject(),F.O9.lightgrey)}),(0,i.tZ)(eF.i,{color:"blue",children:(0,i.BX)("div",{children:[(0,i.tZ)("strong",{children:"Note:"})," These units are optional"]})}),(0,i.tZ)("div",{className:"mb20",children:(0,i.BX)("div",{className:"mt20",children:[(0,i.tZ)(UnitSelector,{amount:b,unit:v,units:W.ML,onChange:(e,t)=>{f(t),w(e)}}),(0,i.tZ)(UnitSelector,{amount:h,unit:k,units:W.Nc,onChange:(e,t)=>{g(t),y(e)}}),(0,i.tZ)(UnitSelector,{unit:"CONTAINER",amount:m,units:["CONTAINER"],onChange:(e,t)=>p(t)})]})}),(0,i.tZ)("button",{id:"submitCustomFoodForm",type:"submit",className:"purple bold mt30 mb10",children:t?"Update Food":"Create Food"})]})},addQuickLogToCloud=(e,t,n)=>(0,f.a)().then(t=>{t.request((0,g.O)(q.JV),e).then(e=>{let t=e.insert_logs.returning;y.h.dispatch("addLogs",t),n()})}).catch(e=>{(0,p.S)(e)}),e7={Baseball:5,Basketball:6.5,Boxing:7,Cricket:5,Dance:6,"Field hockey":8,Football:9,Golf:4.5,Hiking:6,"Horseback riding":4.5,"Ice hockey":8,"Ice skating":7,"Jumping rope":10,Lacrosse:8,"Martial arts":10,Racquetball:7,"Roller skating":7,Rugby:10,Skateboarding:5,Skiing:7,Soccer:7,Softball:5,Squash:7,"Tennis (doubles)":6,"Tennis (singles)":8,Volleyball:4,"Water polo":10,Wrestling:5},e9={Backstroke:8,Breaststroke:10,Butterfly:11,Freestyle:9},e8={"Free weights":5,Machines:3.5},calculateCaloriesFromMETs=(e,t,n)=>(0,ev.N)(3.5*n*(e/2.2)*t/200,0),getCyclingMET=e=>(0,ev.N)(.8425*e-2.243,2);var te=JSON.parse('{"50":3.5,"100":7,"150":8.5,"200":12}');let getRowingMET=e=>{let t=te[String(e)];return t||(0,ev.N)(.054*e+1,2)};var tt=JSON.parse('{"4":5,"5":8,"6":10,"7":11.5,"8":13.5,"9":15,"10":16,"5.2":9,"6.7":11,"7.5":12.5,"8.6":14,"10.9":18}');let getRunningMET=e=>{let t=tt[String(e)];return t||(0,ev.N)(1.7306*e-.7185,2)},getWalkingMET=(e,t)=>{let n=26.8*e;return(0,ev.N)((.1*n+1.8*n*(t/100)+3.5)/3.5,2)},getMETsFromInput=(e,t,n,i,o,r,a)=>{if("Cycling"===e)return getCyclingMET(o);if("Running"===e)return getRunningMET(o);if("Walking"===e)return getWalkingMET(o,r);if("Rowing"===e)return getRowingMET(a);if("Other"===e)return e7[t];if("Swimming"===e)return e9[n];if("Lifting"===e)return e8[i];else if("Custom"===e)return 0;else throw Error("Error: getMETsFromInput: ".concat(JSON.stringify({exerciseGroup:e,incline:r,liftingActivity:i,mph:o,otherActivity:t,swimmingActivity:n,watts:a})))};function ExerciseForm_templateObject(){let e=(0,a._)(["\n    min-width: 20%;\n\n    @media (max-width: ","px) {\n      flex: 1;\n      min-width: 45%;\n    }\n  "]);return ExerciseForm_templateObject=function(){return e},e}function ExerciseForm_templateObject1(){let e=(0,a._)(["\n    min-width: 25%;\n  "]);return ExerciseForm_templateObject1=function(){return e},e}function ExerciseForm_templateObject2(){let e=(0,a._)(["\n    margin-top: 0;\n  "]);return ExerciseForm_templateObject2=function(){return e},e}function ExerciseForm_templateObject3(){let e=(0,a._)(["\n          > div > button {\n            font-size: 0.9rem;\n            margin: 5px;\n          }\n        "]);return ExerciseForm_templateObject3=function(){return e},e}let tn=["Cycling","Lifting","Rowing","Running","Swimming","Walking","Other","Custom"],ExerciseForm=e=>{let{profile:t}=e,{metricSystem:n}=t,[o,a]=r.useState(""),[c,s]=r.useState(""),[d,u]=r.useState(""),[m,p]=r.useState(""),[h,g]=r.useState(""),[b,f]=r.useState(""),[v,w]=r.useState("Custom"),[k,y]=r.useState("Baseball"),[_,O]=r.useState("Backstroke"),[N,Z]=r.useState("Machines"),{dispatch:S}=(0,C.bI)(),B=(0,l.iv)(ExerciseForm_templateObject(),F.md),T=(0,l.iv)(ExerciseForm_templateObject1()),groupButton=e=>(0,i.tZ)("button",{onClick:()=>w(e),type:"button",css:B,className:"expand background ".concat(e===v?"active":""),children:e},e),x=(0,l.iv)(ExerciseForm_templateObject2());return(0,i.tZ)("div",{className:"w100",children:(0,i.BX)("form",{css:(0,l.iv)(ExerciseForm_templateObject3()),onSubmit:e=>{e.preventDefault();let i=getMETsFromInput(v,k,_,N,n?.6213711922*Number(m):Number(m),Number(h),Number(d));if(-1!==i){let e="Custom"===v?Number(b):calculateCaloriesFromMETs(n?2.2046226218*Number(o):Number(o),Number(c),i),r={objects:[{amount:(0,ev.N)(e,0),unit:"EXERCISE"}]};addQuickLogToCloud(r,t.enablePlanning,()=>{S("closeExerciseModal")})}},children:["Custom"!==v&&(0,i.BX)("div",{className:"group",children:[(0,i.BX)("div",{className:"w50",children:[(0,i.BX)("label",{htmlFor:"weight",children:["Weight",(0,i.tZ)("span",{className:"pink tag",children:n?"kg":"lbs"})]}),(0,i.tZ)("input",{placeholder:"200",id:"weight",onChange:e=>{a(e.target.value)},value:o,type:"number",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",step:"any",required:!0})]}),(0,i.BX)("div",{className:"w50",children:[(0,i.BX)("label",{htmlFor:"minutes",children:["Duration",(0,i.tZ)("span",{className:"pink tag",children:"Minutes"})]}),(0,i.tZ)("input",{placeholder:"60",id:"minutes",onChange:e=>{s(e.target.value)},value:c,type:"number",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",step:"any",required:!0})]})]}),(0,i.tZ)("div",{className:"fr wrap mt30 mb30 w100",children:tn.map(e=>groupButton(e))}),"Other"===v&&(0,i.tZ)("div",{className:"fr wrap",children:Object.keys(e7).map(e=>(0,i.tZ)("button",{type:"button",onClick:()=>y(e),css:[B,T],className:"blue expand ".concat(e===k?"active":""),children:e},e))}),"Swimming"===v&&(0,i.tZ)("div",{className:"fr wrap",children:Object.keys(e9).map(e=>(0,i.tZ)("button",{type:"button",onClick:()=>O(e),className:"blue expand ".concat(e===_?"active":""),children:e},e))}),"Lifting"===v&&(0,i.tZ)("div",{className:"fr wrap",children:Object.keys(e8).map(e=>(0,i.tZ)("button",{type:"button",onClick:()=>Z(e),className:"blue expand ".concat(e===N?"active":""),children:e},e))}),["Running","Cycling"].includes(v)&&(0,i.tZ)("div",{className:"group",children:(0,i.BX)("div",{className:"w100",children:[(0,i.BX)("label",{css:x,htmlFor:"miles",children:["Pace",(0,i.tZ)("span",{className:"pink tag",children:n?"kph":"mph"})]}),(0,i.tZ)("input",{placeholder:"3",id:"mph",onChange:e=>{p(e.target.value)},value:m,type:"number",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",step:"any",required:!0})]})}),"Rowing"===v&&(0,i.tZ)("div",{className:"group",children:(0,i.BX)("div",{className:"w100",children:[(0,i.BX)("label",{css:x,htmlFor:"watt",children:["Power",(0,i.tZ)("span",{className:"pink tag",children:"Watts"})]}),(0,i.tZ)("input",{placeholder:"100",id:"watt",onChange:e=>{u(e.target.value)},value:d,type:"number",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",step:"any",required:!0})]})}),"Walking"===v&&(0,i.BX)("div",{className:"group",children:[(0,i.BX)("div",{className:"w50",children:[(0,i.BX)("label",{css:x,htmlFor:"pace",children:["Pace",(0,i.tZ)("span",{className:"pink tag",children:n?"kph":"mph"})]}),(0,i.tZ)("input",{placeholder:"3",id:"pace",onChange:e=>{p(e.target.value)},value:m,type:"number",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",step:"any",required:!0})]}),(0,i.BX)("div",{className:"w50",children:[(0,i.BX)("label",{css:x,htmlFor:"incline",children:["Incline",(0,i.tZ)("span",{className:"pink tag",children:"%"})]}),(0,i.tZ)("input",{placeholder:"3",id:"incline",onChange:e=>{g(e.target.value)},value:h,type:"number",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",step:"any",required:!0})]})]}),"Custom"===v&&(0,i.tZ)("div",{className:"group",children:(0,i.BX)("div",{className:"w100",children:[(0,i.tZ)("label",{css:x,htmlFor:"calories",children:"Calories burned"}),(0,i.tZ)("input",{placeholder:"100",id:"calories",onChange:e=>{f(e.target.value)},value:b,type:"number",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",step:"any",required:!0})]})}),(0,i.tZ)("button",{type:"submit",className:"purple bold mt30 mb10",children:"Add calories burned"})]})})};var ti=n(86778);let splitIntoPages=(e,t)=>{if(e.length<=t)return[e];{let n=e.slice(0,t),i=e.slice(t);return[n,...splitIntoPages(i,t)]}};var to={src:"/_next/static/media/leftArrow.0dc724ce.svg",height:512,width:512,blurWidth:0,blurHeight:0},tr={src:"/_next/static/media/rightArrow.47a41b0b.svg",height:512,width:512,blurWidth:0,blurHeight:0};function Paginator_templateObject(){let e=(0,a._)(["\n    margin-bottom: 5px;\n    margin-top: 20px;\n  "]);return Paginator_templateObject=function(){return e},e}function Paginator_templateObject1(){let e=(0,a._)(["\n    &:hover,\n    &:focus {\n      background-color: transparent;\n      outline: 1px solid ",";\n    }\n  "]);return Paginator_templateObject1=function(){return e},e}let Paginator=e=>{let{activePage:t,handleClick:n,items:o}=e,r=(0,l.iv)(Paginator_templateObject()),a=(0,l.iv)(Paginator_templateObject1(),F.O9.black);return(0,i.tZ)("div",{css:r,className:"fec w100 h100 expand ai-fe",children:(0,i.BX)("div",{className:"frc w100",children:[(0,i.tZ)("button",{onClick:e=>{e.preventDefault(),n(0)},type:"button",className:"background",children:"Start"}),(0,i.BX)("div",{className:"fr",children:[(0,i.tZ)("button",{css:a,onClick:e=>{e.preventDefault(),t>0&&n(t-1)},type:"button",children:(0,i.tZ)(K.E,{width:15,height:15,alt:"arrow pointing left",src:to})}),(0,i.BX)("div",{children:[t+1," / ",o.length]}),(0,i.tZ)("button",{css:a,onClick:e=>{e.preventDefault(),t+1<o.length&&n(t+1)},type:"button",children:(0,i.tZ)(K.E,{width:15,height:15,alt:"arrow pointing right",src:tr})})]}),(0,i.tZ)("button",{onClick:e=>{e.preventDefault(),n(o.length-1)},className:"background",type:"button",children:"End"})]})})};var ta=n(24526),tl=n(55920);let deleteFoodOnCloud=(e,t)=>(0,f.a)().then(n=>{n.request((0,g.O)(e5.vj),{id:e}).then(()=>{t()})}).catch(e=>(0,p.S)(e)),FoodItem=e=>{let{food:t}=e,{createdAt:n,foodToProfile:o,id:r,name:a,type:l}=t;return(0,i.tZ)(Item,{item:{alias:null,amount:null,barcode:null,basicFood:null,childRecipe:null,consumed:null,createdAt:n,food:null,id:r,meal:null,name:a,onDelete:()=>{deleteFoodOnCloud(r,()=>{})},onUpdate:null,profile:o,recipe:null,src:null,type:l,unit:null}})},IngredientItem=e=>{let{deleteIngredient:t,ingredient:n}=e,{amount:o,barcode:r,createdAt:a,id:l,type:c,unit:s}=n,d=n.ingredientToFood,u=n.ingredientToChildRecipe,m=(0,eZ.T)(d||u,eZ.a),p=(null==d?void 0:d.name)||(null==u?void 0:u.name)||"";return(0,i.tZ)(Item,{item:{alias:null,amount:o,barcode:r,basicFood:n.basicFood,childRecipe:u,consumed:null,createdAt:a,food:d,id:l,meal:null,name:p,onDelete:e=>{e&&t(e)},onUpdate:(e,t,i,o,r,a)=>{if(t){if(i){let e={...n,amount:i,consumed:o,meal:r,unit:t};a("saveIngredient",e)}else H.ZP.error("Please specify a valid amount")}else H.ZP.error("Please specify a unit")},profile:n.ingredientToProfile,recipe:null,src:r?V.src:m,type:c,unit:s}})};var tc=n(43400);let deleteRecipeOnCloud=(e,t)=>(0,f.a)().then(n=>{n.request((0,g.O)(tc.s0),{id:e}).then(()=>{t()})}).catch(e=>(0,p.S)(e)),RecipeItem=e=>{let{recipe:t}=e,{createdAt:n,id:o,name:r,type:a}=t;return(0,i.tZ)(Item,{item:{alias:null,amount:null,barcode:null,basicFood:null,childRecipe:null,consumed:null,createdAt:n,food:null,id:o,meal:null,name:r,onDelete:()=>{deleteRecipeOnCloud(o,()=>{})},onUpdate:null,profile:t.recipeToProfile,recipe:null,src:null,type:a,unit:null}})},getItem=(e,t,n,o)=>{if("recipe"===e.type)return(0,i.tZ)(RecipeItem,{recipe:e});if("food"===e.type&&"food-list"===o)return(0,i.tZ)(FoodItem,{food:e});if("ingredient"===e.type&&n&&t)return(0,i.tZ)(IngredientItem,{deleteIngredient:n,updateIngredient:t,ingredient:e});throw Error("Error: PaginatedList: ".concat(JSON.stringify({item:e})))},getNumberOfItems=(e,t)=>{var n,i;let o=null===(n=e.current)||void 0===n?void 0:n.getBoundingClientRect().height,r=null===(i=t.current)||void 0===i?void 0:i.getBoundingClientRect().height;return o&&r?Math.ceil(o/r):null},List=e=>{let{deleteItem:t,forcedNumberOfItems:n,items:o,paginate:a,purpose:l,renderItem:c,searchable:s,updateItem:d}=e,[u,m]=r.useState(0),[p,h]=r.useState(""),[g,b]=r.useState([]),[f,v]=r.useState(n||4),[w,k]=r.useState(o.length),C=(0,ta.g)(o),y=r.useRef(null),_=r.useRef(null),O=(0,eW.D)(100,()=>{let e=getNumberOfItems(y,_);e&&v(e)}),N=n?()=>v(n):O;r.useEffect(()=>(N(),window.addEventListener("resize",N),()=>{window.removeEventListener("resize",N)}),[N]),w!==o.length&&(m(0),k(o.length));let Z=!1===a?[o]:splitIntoPages(s&&""!==p?g:o,f);return(0,i.BX)("div",{id:"".concat(l),className:"w100 h100 fcs expand",children:[s&&(0,i.tZ)("input",{type:"text",autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",value:p,disabled:!1,onChange:e=>{let t=e.target.value,n=(0,tl.B)(t,C).slice(0,4);h(t),b(n),m(0)},placeholder:"Filter by name...",className:"fr bar list-bar mb30"}),(0,i.tZ)("div",{ref:y,className:"w100",children:w===o.length&&Z[u].map((e,n)=>(0,i.tZ)("div",{className:"w100",ref:0===n?_:null,children:c?c(e):getItem(e,d,t,l)},e.id))}),a&&(0,i.tZ)(Paginator,{activePage:u,items:Z,handleClick:e=>{m(e)}})]})},IngredientList=e=>{let{deleteIngredient:t,ingredients:n,recipe:o,updateIngredient:r}=e,a=n.map(e=>({...e,ingredientToRecipe:o})).sort((e,t)=>{var n,i,o,r;let a=(null==e?void 0:null===(n=e.ingredientToFood)||void 0===n?void 0:n.name)||(null==e?void 0:null===(i=e.ingredientToChildRecipe)||void 0===i?void 0:i.name)||e.unit,l=(null==t?void 0:null===(o=t.ingredientToFood)||void 0===o?void 0:o.name)||(null==t?void 0:null===(r=t.ingredientToChildRecipe)||void 0===r?void 0:r.name)||t.unit;return a.localeCompare(l)});return(0,i.tZ)(List,{purpose:"ingredient-list",items:a,searchable:!1,paginate:!1,updateItem:r,deleteItem:t})},upsertItem=(e,t)=>{let n=e.find(e=>e.id===t.id);return void 0!==n?e.map(e=>e.id===n.id?t:e):[...e,t]};let Recipe=class Recipe{constructor(){this.id=(0,U.V)(),this.updatedAt=new Date,this.createdAt=new Date,this.type="recipe",this.ingredients=[]}};let createRecipeLog=e=>{let t=new Recipe;t.ingredients=e;let n=new Log;return n.logToRecipe=t,n.amount=1,n.unit="COUNT",n};var ts=n(43919);let addRecipeToCloud=(e,t)=>(0,f.a)().then(n=>{n.request((0,g.O)(tc.l_),{object:e}).then(()=>{t()})}).catch(e=>(0,p.S)(e)),updateRecipeOnCloud=(e,t)=>(0,f.a)().then(n=>{n.request((0,g.O)(tc.nP),e).then(()=>{t()})}).catch(e=>(0,p.S)(e));var td=n(8026),tu=n.n(td);let addIngredients=(e,t)=>{let{...n}=e;return tu()(n,{ingredients:{data:t}})},formatIngredient=(e,t)=>{var n,i;let{amount:o,barcode:r,basicFood:a,childRecipe:l,food:c,recipe:s,unit:d}=tu()(e,{barcode:e.barcode,basicFood:e.basicFood,childRecipe:null===(n=e.ingredientToChildRecipe)||void 0===n?void 0:n.id,food:e.basicFood?null:null===(i=e.ingredientToFood)||void 0===i?void 0:i.id,recipe:t});return{amount:o,barcode:r,basicFood:a,childRecipe:l,food:c,recipe:s,unit:d}},formatDataForMutation=(e,t,n)=>{let i=t.map(e=>formatIngredient(e,n)),o={object:addIngredients(e,i)};return o},submitRecipe=(e,t,n,i,o,r)=>{if(null==i?void 0:i.id){let a=formatDataForMutation(e,t,i.id),l=a.object.ingredients.data,c=n.map(e=>e.id),s={ingredients_to_delete:c,ingredients_to_insert:l,pk_columns:{id:i.id},set:(0,ts.Uy)(e,e=>{delete e.ingredients})},d=i.countToGram&&!e.countToGram,u=i.countToTbsp&&!e.countToTbsp;return(d||u)&&alert("When you remove a unit from a recipe, it can break the recipes and the logs if they have stored the recipe with that unit. For example, you have made a log with 500mL of pudding and you remove the tbsp per recipe. Make sure you fix them after this update!"),updateRecipeOnCloud(s,()=>{r&&(o("closeRecipeFormModal"),o("closeMenu"))})}{let n=formatDataForMutation(e,t,null==i?void 0:i.id);return addRecipeToCloud({...n.object,countToGram:e.countToGram,countToTbsp:e.countToTbsp,servingPerContainer:e.servingPerContainer},()=>{r&&o("closeRecipeFormModal")})}};function RecipeForm_templateObject(){let e=(0,a._)(["\n    font-size: 0.8rem;\n    position: relative;\n  "]);return RecipeForm_templateObject=function(){return e},e}function RecipeForm_templateObject1(){let e=(0,a._)(["\n          background-color: ",";\n        "]);return RecipeForm_templateObject1=function(){return e},e}function RecipeForm_templateObject2(){let e=(0,a._)(["\n          background-color: ",";\n        "]);return RecipeForm_templateObject2=function(){return e},e}let RecipeForm=e=>{let{profile:t,recipe:n}=e,{dispatch:o,editor:a}=(0,C.bI)("editor"),[c,s]=r.useState((null==n?void 0:n.name)||""),[d,u]=r.useState((null==n?void 0:n.countName)||""),[m,p]=r.useState((null==n?void 0:n.countToGram)||""),[h,g]=r.useState((null==n?void 0:n.countToTbsp)||""),[b,f]=r.useState((null==n?void 0:n.servingPerContainer)||""),[v,w]=r.useState((null==n?void 0:n.preferredVolumeUnit)||"TBSP"),[k,y]=r.useState((null==n?void 0:n.preferredWeightUnit)||"GRAM"),[_,O]=r.useState(!0),[N,Z]=r.useState(!0),S=(null==n?void 0:n.ingredients)||[],[B,T]=r.useState(S),{ingredient:x}=a,j=(0,e4.q)(k,prep(m)||0),M=(0,e6.N)(v,prep(h)||0),P={countName:d,countToGram:j,countToTbsp:M,ingredients:B,name:c,preferredVolumeUnit:v,preferredWeightUnit:k,servingPerContainer:prep(b)};r.useEffect(()=>{s((null==n?void 0:n.name)||""),u((null==n?void 0:n.countName)||""),T(S),w((null==n?void 0:n.preferredVolumeUnit)||"TBSP"),y((null==n?void 0:n.preferredWeightUnit)||"GRAM"),_&&(g(getAdjustedVolumeAmount(h,v)),O(!1)),N&&(p(getAdjustedWeightAmount(m,k)),Z(!1))},[n]);let updateIngredients=(e,t)=>{let n=upsertItem(e,t);T(n)};(0,r.useEffect)(()=>{null!==x&&(updateIngredients(B,x),o("saveIngredient",null),o("closeAddIngredientModal",!0),o("closeBarcodeModal"))},[o,x,B]);let I=(0,l.iv)(RecipeForm_templateObject());return(0,i.BX)("form",{className:"fcs expand",onSubmit:e=>{e.preventDefault(),submitRecipe(P,B,S,n,o,!0)},children:[(0,i.BX)("div",{className:"group",children:[(0,i.BX)("div",{className:"w60",children:[(0,i.tZ)("label",{htmlFor:"nameRecipe",children:"Name"}),(0,i.tZ)("input",{placeholder:"Chili",required:!0,id:"nameRecipe",onChange:e=>{s(e.target.value)},value:P.name,type:"text",autoCapitalize:"on",autoComplete:"off",autoCorrect:"off"})]}),(0,i.BX)("div",{className:"w40",children:[(0,i.tZ)("label",{htmlFor:"countNameRecipe",children:"Label"}),(0,i.tZ)("input",{required:!0,id:"countNameRecipe",onChange:e=>{u(e.target.value)},value:d,type:"text",placeholder:"bowl",autoCapitalize:"off",autoComplete:"off",autoCorrect:"off"})]})]}),(0,i.BX)("div",{className:"fc w100 mt20 mb25",children:[(0,i.tZ)("div",{className:"bold",children:"Add ingredients +"}),(0,i.BX)("div",{className:"fr mt20",children:[(0,i.tZ)("button",{onClick:()=>o("openAddIngredientModal",null==n?void 0:n.id),type:"button",css:I,className:"green mr20",children:"By Search"}),(0,i.tZ)("button",{onClick:()=>o("openBarcodeModal"),type:"button",css:I,className:"green",children:"By Barcode"})]})]}),(0,i.tZ)(IngredientList,{recipe:n,ingredients:B,updateIngredient:(0,ti.W)(updateIngredients)(B),deleteIngredient:e=>{let t=B.filter(t=>t.id!==e);T(t)}}),(0,i.tZ)(Divider,{height:1,className:"mt20 mb0",styles:(0,l.iv)(RecipeForm_templateObject1(),F.O9.lightgrey)}),(0,i.tZ)(eF.i,{color:"blue",children:(0,i.BX)("div",{children:[(0,i.tZ)("strong",{children:"Note:"})," These units are optional"]})}),(0,i.tZ)("div",{className:"w100",children:(0,i.tZ)("div",{className:"mb20",children:(0,i.BX)("div",{className:"mt20",children:[(0,i.tZ)(UnitSelector,{title:"per recipe",amount:h,unit:v,units:W.ML,onChange:(e,t)=>{g(t),w(e)}}),(0,i.tZ)(UnitSelector,{title:"per recipe",amount:m,unit:k,units:W.Nc,onChange:(e,t)=>{p(t),y(e)}})]})})}),(0,i.tZ)(Divider,{height:1,className:"mb0",styles:(0,l.iv)(RecipeForm_templateObject2(),F.O9.lightgrey)}),(0,i.BX)("div",{className:"fc w100 mt20",children:[(0,i.tZ)("div",{className:"bold",children:"Total"}),(0,i.tZ)("div",{className:"background pbutton-large rounded nohover mt20 mb20",children:(0,i.tZ)(Macros,{log:createRecipeLog(B),profile:t,showTitles:!0})})]}),(0,i.tZ)("button",{id:"submitRecipeForm",type:"submit",className:"purple bold mt20 start",children:n?"Update Recipe":"Create Recipe"})]})},updateProfileOnCloud=(e,t)=>{(0,f.a)().then(n=>{n.request((0,g.O)(d.r0),e).then(()=>{t()})})};var tm=n(12196);let calculateBMRUsingKatchMcardle=(e,t)=>370+21.6*(e/2.20462)*(1-t),calculateBMI=(e,t)=>703*e/t**2,calculateBodyFatPercentageUsingCUN_BAE=(e,t,n,i)=>{let o=calculateBMI(e,t),r="female"===n?1:"other"===n?.5:0;return -44.988+.503*i+10.689*r+3.172*o-.026*o**2+.181*o*r-.02*o*i-.005*o**2*r+21e-5*o**2},calculateIdealBodyWeightInKg=(e,t)=>{let n=52+1.9*(t-60),i=49+1.7*(t-60);return"male"===e?n:"female"===e?i:(n+i)/2},calculateTargets=(e,t,n,i,o,r,a,l)=>{let c=Number(t),s=e?2.2046226218*Number(i):Number(i),d=e?.3937*Number(o):12*Number(o)+Number(r),u=calculateIdealBodyWeightInKg(n,d),m=calculateBodyFatPercentageUsingCUN_BAE(s,d,n,c)/100,p=s*(1-m)/2.2,h=calculateBMRUsingKatchMcardle(s,m),g=1.2000000000000002*h;return{calorieTarget:Math.round("maintain"===l?1*g:"muscle"===l?1.1*g:Math.round(.75*g)),proteinTarget:!0===a?Math.round(1.6*p):Math.round(1.2*u)}};function CalculateTargetForm_templateObject(){let e=(0,a._)(["\n                  font-size: 0.8rem !important;\n                  margin-bottom: 10px;\n                  @media (max-width: ","px) {\n                    > button {\n                      min-width: 100%;\n                      margin: 5px;\n                    }\n                  }\n                "]);return CalculateTargetForm_templateObject=function(){return e},e}function CalculateTargetForm_templateObject1(){let e=(0,a._)(["\n                  font-size: 0.8rem !important;\n                  height: 41px !important;\n                "]);return CalculateTargetForm_templateObject1=function(){return e},e}let CalculateTargetForm=e=>{let{profile:t}=e,[n,o]=r.useState(!!t.metricSystem),[a,c]=r.useState(""),[s,d]=r.useState(""),[u,m]=r.useState(""),[p,h]=r.useState(!1),[g,b]=r.useState("female"),[f,v]=r.useState("maintain"),[w,k]=r.useState(""),{dispatch:y}=(0,C.bI)();return(0,i.tZ)("div",{children:(0,i.tZ)("div",{children:(0,i.BX)("form",{onSubmit:e=>{e.preventDefault();let{calorieTarget:i,proteinTarget:o}=calculateTargets(n,w,g,a,s,u,p,f),r={id:t.id,set:{calorieTarget:i,metricSystem:n,proteinTarget:o}};updateProfileOnCloud(r,()=>{y("closeTargetModal")})},children:[(0,i.tZ)("div",{className:"group expand",children:(0,i.BX)("div",{className:"w100",children:[(0,i.tZ)("label",{className:"mt25",htmlFor:"goal",children:"What is your goal?"}),(0,i.tZ)(e2.m,{css:(0,l.iv)(CalculateTargetForm_templateObject(),F.lg),selected:f,tabs:{fat:{image:"",title:"Lose fat"},maintain:{image:"",title:"Maintain weight"},muscle:{image:"",title:"Gain muscle"}},onSelect:e=>{v(e)}})]})}),(0,i.tZ)("div",{className:"group expand",children:(0,i.BX)("div",{className:"fr mt10 mb0",children:[(0,i.tZ)("label",{htmlFor:"metricSystem",className:"mt0 mb0",children:"Use the metric system?"}),(0,i.tZ)(tm.Z,{className:"ml10 mt5",id:"metricSystem",onChange:e=>{o(e)},checked:n})]})}),(0,i.BX)("div",{className:"group expand",children:[(0,i.BX)("div",{className:"w50",children:[(0,i.BX)("label",{htmlFor:"age",children:["Age",(0,i.tZ)("span",{className:"tag pink",children:"years"})]}),(0,i.tZ)("input",{required:!0,id:"age",onChange:e=>{k(e.target.value)},value:w,type:"number",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",step:"any",placeholder:"40"})]}),(0,i.BX)("div",{className:"w50",children:[(0,i.BX)("label",{htmlFor:"sex",children:["Gender",(0,i.tZ)("span",{className:"tag pink",children:"preferred"})]}),(0,i.tZ)(e2.m,{css:(0,l.iv)(CalculateTargetForm_templateObject1()),selected:g,tabs:{female:{image:"",title:"Female"},male:{image:"",title:"Male"},other:{image:"",title:"Other"}},onSelect:e=>{b(e)}})]})]}),(0,i.BX)("div",{className:"group",children:[(0,i.BX)("div",{className:"expand",children:[(0,i.BX)("label",{htmlFor:"currentWeight",children:["Weight",(0,i.tZ)("span",{className:"tag pink",children:n?"kg":"lbs"})]}),(0,i.tZ)("input",{id:n?"currentKg":"currentLbs",onChange:e=>{c(e.target.value)},value:a,type:"number",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",step:"any",placeholder:n?"70":"160",required:!0})]}),(0,i.BX)("div",{className:"expand",children:[(0,i.BX)("label",{htmlFor:"height",children:["Height",(0,i.tZ)("span",{className:"tag pink",children:n?"cm":"feet"}),!n&&(0,i.tZ)("span",{className:"tag pink",children:"inches"})]}),(0,i.BX)("div",{className:"frc",children:[(0,i.tZ)("input",{id:n?"currentCm":"currentFeet",onChange:e=>{d(e.target.value)},value:s,type:"number",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",step:"any",placeholder:n?"80":"5",required:!0}),!n&&(0,i.tZ)("input",{className:"ml10",id:"currentInches",onChange:e=>{m(e.target.value)},value:u,type:"number",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",step:"any",placeholder:"8",required:!0})]})]})]}),(0,i.tZ)("div",{className:"group expand",children:(0,i.BX)("div",{className:"fr mt10 mb10",children:[(0,i.tZ)("label",{htmlFor:"liftWeights",children:"Do you lift weights?"}),(0,i.tZ)(tm.Z,{className:"ml10 mt5",id:"liftWeights",onChange:e=>{h(e)},checked:p})]})}),(0,i.tZ)("button",{type:"submit",className:"purple bold",children:"Calculate"})]})})})};function TargetForm_templateObject(){let e=(0,a._)(["\n    font-size: 0.95rem !important;\n    width: 90% !important;\n  "]);return TargetForm_templateObject=function(){return e},e}let TargetForm=e=>{let{profile:t}=e,[n,o]=r.useState((null==t?void 0:t.calorieTarget)||""),[a,c]=r.useState((null==t?void 0:t.proteinTarget)||""),{dispatch:s}=(0,C.bI)(),d={calorieTarget:n,proteinTarget:a},u=(0,l.iv)(TargetForm_templateObject());return(0,i.tZ)("div",{className:"w100",children:(0,i.tZ)("div",{className:"w100",children:t&&(0,i.BX)("div",{children:[(0,i.tZ)("form",{onSubmit:e=>{e.preventDefault();let n={id:t.id,set:d};updateProfileOnCloud(n,()=>{s("closeTargetModal")})},children:(0,i.BX)("div",{className:"group fr",children:[(0,i.BX)("div",{className:"expand",children:[(0,i.tZ)("label",{className:"fr",htmlFor:"calorieTarget",children:"Calories"}),(0,i.tZ)("input",{required:!0,id:"calorieTarget",onChange:e=>{o(e.target.value)},value:d.calorieTarget,type:"number",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",step:"any"})]}),(0,i.BX)("div",{className:"expand",children:[(0,i.tZ)("label",{className:"fr",htmlFor:"proteinTarget",children:"Protein"}),(0,i.tZ)("input",{required:!0,id:"proteinTarget",onChange:e=>{c(e.target.value)},value:d.proteinTarget,type:"number",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",step:"any"})]}),(0,i.BX)("div",{children:[(0,i.tZ)("label",{className:"opaque",children:"Update"}),(0,i.tZ)("button",{type:"submit",className:"purple bold",children:"Update"})]})]})}),(0,i.tZ)(Divider,{height:5,className:"mt30 mb30 w90 center"}),(0,i.tZ)(eF.i,{styles:u,color:"blue",children:"Personalize your numbers with this form"}),(0,i.tZ)(CalculateTargetForm,{profile:t})]})})})};var tp={src:"/_next/static/media/trashcan.b25ee4cc.svg",height:512,width:512,blurWidth:0,blurHeight:0},th=n(78368);let deleteProfile=async e=>{try{let n=window.confirm("Are you sure you want to delete your account? All your data will be permanently deleted. This cannot be undone!");if(n){let n=await (0,f.a)();if(await n.request((0,g.O)(d._v),{authId:e.authId}),v.I){var t;let e=(0,th.v0)(tW);await (null===(t=e.currentUser)||void 0===t?void 0:t.delete())}H.ZP.success("Your account has been deleted!"),await (0,k.k)(!1)}}catch(e){(0,p.S)(e)}},DeleteAccount=e=>{let{profile:t}=e;return(0,i.BX)("div",{className:"w100",children:[(0,i.tZ)("div",{css:tf,className:"pbutton rounded mt30 mb20 pink nohover",children:"Danger zone"}),(0,i.BX)("button",{onClick:async()=>{await deleteProfile(t)},css:tv,className:"fr white",children:[(0,i.tZ)(K.E,{alt:"Trashcan",src:tp,width:40,height:40}),(0,i.tZ)("div",{className:"ml15",children:"Delete account"})]})]})};var tg=n(44675);function Information_templateObject(){let e=(0,a._)(["\n    width: 230px;\n  "]);return Information_templateObject=function(){return e},e}let Information=e=>{var t;let{profile:n}=e,o=useUser(),[a,c]=(0,r.useState)(n.showCalories),[s,d]=(0,r.useState)(n.showDensities),[u,m]=(0,r.useState)(n.hidePWAPrompt),[p,h]=(0,r.useState)(n.countDown),[g,b]=(0,r.useState)(n.enablePlanning),[f,v]=(0,r.useState)(n.metricSystem),w=o&&"PENDING"!==o,k=w&&"token"in o?"&"+o.token:w&&(o.email||(null===(t=o.providerData[0])||void 0===t?void 0:t.email)),C=(0,l.iv)(Information_templateObject());return(0,i.BX)("div",{className:"w100 mt10",children:[(0,i.tZ)("div",{css:tf,className:"pbutton rounded blue nohover mt20 mb20",children:"Profile"}),(0,i.tZ)("div",{className:"ml5",children:k&&(0,i.BX)(i.HY,{children:[(0,i.tZ)("strong",{className:"mr5",children:"&"===k[0]?"Token:":"Email:"}),"&"===k[0]?k.slice(1):k]})}),(0,i.tZ)("div",{className:"ml5 mt5",children:(0,i.BX)(i.HY,{children:[(0,i.tZ)("strong",{className:"mr5",children:"Version:"}),tg.env.NEXT_PUBLIC_VERSION]})}),(0,i.tZ)("div",{css:tf,className:"pbutton rounded green nohover mt30 mb20",children:"Preferences"}),(0,i.tZ)("div",{className:"fr mt20 ml5",children:(0,i.BX)("label",{className:"fr",children:[(0,i.tZ)("span",{className:"mr10",css:C,children:"Use the metric system"}),(0,i.tZ)(tm.Z,{onChange:e=>{updateProfileOnCloud({id:n.id,set:{metricSystem:e}},()=>{v(e)})},checked:f})]})}),(0,i.BX)("div",{className:"mt20",children:[(0,i.tZ)("div",{className:"fr mt20 ml5",children:(0,i.BX)("label",{className:"fr",children:[(0,i.tZ)("span",{className:"mr10",css:C,children:"Do not show calories"}),(0,i.tZ)(tm.Z,{onChange:e=>{updateProfileOnCloud({id:n.id,set:{showCalories:!e}},()=>{c(!e)})},checked:!a})]})}),(0,i.tZ)("div",{className:"fr mt20 ml5",children:(0,i.BX)("label",{className:"fr",children:[(0,i.tZ)("span",{className:"mr10",css:C,children:"Enable planning the day"}),(0,i.tZ)(tm.Z,{onChange:e=>{updateProfileOnCloud({id:n.id,set:{enablePlanning:e}},()=>{b(e)})},checked:g})]})}),(0,i.tZ)("div",{className:"fr mt20 ml5",children:(0,i.BX)("label",{className:"fr",children:[(0,i.BX)("span",{className:"mr10",css:C,children:["Calories ","&"," protein count up"]}),(0,i.tZ)(tm.Z,{onChange:e=>{updateProfileOnCloud({id:n.id,set:{countDown:!e}},()=>{h(!e)})},checked:!p})]})}),(0,i.tZ)("div",{className:"fr mt20 ml5",children:(0,i.BX)("label",{className:"fr",children:[(0,i.tZ)("span",{className:"mr10",css:C,children:"Show density of each food"}),(0,i.tZ)(tm.Z,{onChange:e=>{updateProfileOnCloud({id:n.id,set:{showDensities:e}},()=>{d(e)})},checked:s})]})}),(0,i.tZ)("div",{className:"fr mt20 ml5",children:(0,i.BX)("label",{className:"fr",children:[(0,i.tZ)("span",{className:"mr10",css:C,children:"Hide prompt to download app"}),(0,i.tZ)(tm.Z,{onChange:e=>{updateProfileOnCloud({id:n.id,set:{hidePWAPrompt:e}},()=>{m(e)})},checked:u})]})})]})]})};function Settings_templateObject(){let e=(0,a._)(["\n  margin: 20px auto;\n  max-width: 800px;\n  padding-bottom: 10px;\n  width: 80%;\n  line-height: 1.6;\n  h2 {\n    margin-bottom: 25px;\n    margin-top: 25px;\n  }\n  h3 {\n    margin-bottom: 25px;\n    margin-top: 25px;\n  }\n  ul,\n  ol {\n    margin-bottom: 20px;\n    margin-left: 20px;\n  }\n"]);return Settings_templateObject=function(){return e},e}function Settings_templateObject1(){let e=(0,a._)(["\n  font-size: 1rem;\n  font-weight: 400;\n  width: 100%;\n"]);return Settings_templateObject1=function(){return e},e}function Settings_templateObject2(){let e=(0,a._)(["\n  border: 1px solid ",";\n  font-size: 1.1rem;\n  img {\n    height: 40px;\n    margin-right: 10px;\n    width: 40px;\n  }\n"]);return Settings_templateObject2=function(){return e},e}let tb=(0,l.iv)(Settings_templateObject()),tf=(0,l.iv)(Settings_templateObject1()),tv=(0,l.iv)(Settings_templateObject2(),F.O9.lightgrey),Settings=e=>{let{profile:t}=e;return(0,i.BX)("div",{css:tb,className:"fcc",children:[(0,i.tZ)("h1",{children:"Settings ⚙️"}),(0,i.tZ)(Information,{profile:t}),(0,i.tZ)(DeleteAccount,{profile:t})]})};function Help_templateObject(){let e=(0,a._)(["\n    font-size: 1.1rem;\n    margin: 20px 0;\n  "]);return Help_templateObject=function(){return e},e}function Help_templateObject1(){let e=(0,a._)(["\n    margin-bottom: 15px;\n    > div {\n      border-radius: 5px;\n      &:first-of-type {\n        background-color: ",";\n        margin-right: 10px;\n        padding: 5px 10px;\n      }\n    }\n  "]);return Help_templateObject1=function(){return e},e}function Help_templateObject2(){let e=(0,a._)(["\n            margin-left: 5px;\n            position: relative;\n            top: -1px;\n          "]);return Help_templateObject2=function(){return e},e}let tw={b:"Scan barcode",e:"Log exercise",f:"List custom foods",h:"Show shortcuts",l:"Log food",m:"Show menu",q:"Quick add",r:"List recipes"},Help=()=>{let e=["l","q","Escape","h"],t=(0,l.iv)(Help_templateObject()),n=(0,l.iv)(Help_templateObject1(),F.O9.background);return(0,i.BX)("div",{css:tb,children:[(0,i.tZ)("h1",{children:"Keyboard shortcuts"}),(0,i.BX)("h3",{css:t,className:"fr",children:["Primary"," ",(0,i.tZ)("span",{css:(0,l.iv)(Help_templateObject2()),children:"⭐"})]}),Object.entries({Escape:"Close all windows",...tw}).map(t=>{let[o,r]=t;return e.includes(o)?(0,i.BX)("div",{css:n,className:"fr",children:[(0,i.tZ)("div",{children:o}),(0,i.tZ)("div",{children:r})]},o):""}),(0,i.tZ)(Divider,{className:"mt30 mb20"}),(0,i.tZ)("h3",{className:"fr ".concat(t),children:"Secondary"}),Object.entries(tw).map(t=>{let[o,r]=t;return e.includes(o)?"":(0,i.BX)("div",{css:n,className:"fr",children:[(0,i.tZ)("div",{children:o}),(0,i.tZ)("div",{children:r})]},o)})]})},InformationModal=e=>{let{Information:t}=e;return(0,i.tZ)("div",{css:tb,className:"fc",children:t?(0,i.tZ)("div",{children:t}):(0,i.BX)(i.HY,{children:[(0,i.tZ)("h1",{children:"I cannot find a food!"}),(0,i.BX)("div",{className:"mt10",children:[(0,i.BX)("p",{children:["Don","'","t panic, this is by design."]}),(0,i.BX)("ul",{children:[(0,i.tZ)("li",{children:"We omit branded foods because they already have nutrition labels."}),(0,i.tZ)("li",{children:"We omit foods served at restaurant, like brownies or pizza, because we cannot estimate them accurately."})]}),(0,i.tZ)("p",{children:"By doing so, we remove a ton of clutter from the interface. This, in turn, makes logging everything else much simpler and faster!"})]})]})})};var tk=n(94454),tC=n(76200),ty=n.n(tC),t_={src:"/_next/static/media/back.3d2d6219.svg",height:16,width:16,blurWidth:0,blurHeight:0};function components_Meta_templateObject(){let e=(0,a._)(["\n  margin-left: auto;\n  padding-bottom: 10px;\n  padding-top: 10px;\n\n  img {\n    height: 18px;\n    width: 18px;\n  }\n"]);return components_Meta_templateObject=function(){return e},e}function components_Meta_templateObject1(){let e=(0,a._)(["\n          height: 50px;\n          margin-right: 10px;\n          width: 50px;\n        "]);return components_Meta_templateObject1=function(){return e},e}function Meta_templateObject2(){let e=(0,a._)(["\n          font-size: 1rem;\n          font-weight: 400;\n        "]);return Meta_templateObject2=function(){return e},e}let tO=(0,l.iv)(components_Meta_templateObject()),Meta_Meta=e=>{let{onBack:t,path:n,selectedItem:o,showBack:r}=e,a=getNameAndTags((null==o?void 0:o.name)||"",(null==o?void 0:o.alias)||"");return(0,i.BX)("div",{id:"StandardAdderMeta",className:"w100 fr m20",children:[(0,i.tZ)("img",{id:"StandardAdderMetaImage",css:(0,l.iv)(components_Meta_templateObject1()),src:(0,eZ.T)(o,eZ.a),alt:"Food"}),(0,i.BX)("span",{id:"StandardAdderMetaName",css:(0,l.iv)(Meta_templateObject2()),children:[a.name,a.tags.length>=1&&(0,i.tZ)(Tags,{tags:a.tags}),n.length>=1&&(0,i.tZ)(Tags,{tags:n.slice(1)})]}),r&&(0,i.tZ)("button",{id:"StandardAdderMetaButton",onClick:()=>{t()},onKeyDown:e=>{let n=e.key;"Enter"===n&&t()},css:tO,className:"background z1",type:"button",children:(0,i.tZ)(K.E,{alt:"Back",height:18,width:18,src:t_})})]})};function SearchResults_templateObject(){let e=(0,a._)(["\n    border-radius: 5px;\n    color: ",";\n    font-size: 0.7rem;\n    margin-left: 15px;\n    padding: 7.5px 10px;\n  "]);return SearchResults_templateObject=function(){return e},e}function SearchResults_templateObject1(){let e=(0,a._)(["\n    height: 35px;\n    margin-left: 5px;\n    margin-right: 12.5px;\n    width: 35px;\n  "]);return SearchResults_templateObject1=function(){return e},e}function SearchResults_templateObject2(){let e=(0,a._)(["\n    color: ",";\n    font-size: 0.9rem;\n    font-weight: 400;\n  "]);return SearchResults_templateObject2=function(){return e},e}let SearchResult=e=>{let{index:t,onClick:n,result:o}=e,r=(0,l.iv)(SearchResults_templateObject(),F.O9.text),a=(0,l.iv)(SearchResults_templateObject1()),c=(0,l.iv)(SearchResults_templateObject2(),F.O9.text);return(0,i.BX)("button",{onClick:()=>n(),type:"button",className:"normal w100",id:"StandardAdderSearchResult-".concat(t),children:[!o.isDummy&&(0,i.tZ)(HiddenInput,{inputMode:"decimal"}),(0,i.BX)("div",{className:"fr w100",children:[(0,i.tZ)("img",{css:a,src:(0,eZ.T)(o,eZ.a),alt:"Food"}),(0,i.tZ)("span",{css:c,children:Y()(o.name,{length:30})}),o.isDummy&&(0,i.tZ)("div",{css:r,className:"pink",children:"Expand"}),"food"===o.type&&o.foodToProfile&&(0,i.tZ)("div",{css:r,className:"blue",children:"Custom food"}),"recipe"===o.type&&(0,i.tZ)("div",{css:r,className:"green",children:"Recipe"})]})]},o.id)},getDefaultUnit=e=>Object.keys(e.reduce((e,t)=>({...e,...t}),{}))[0];function SelectedItem_templateObject(){let e=(0,a._)(["\n        margin: 0 auto;\n        max-width: 500px;\n      "]);return SelectedItem_templateObject=function(){return e},e}let SelectedItem=e=>{let{onBack:t,profile:n,selectedItem:o,setSelectedItem:a,type:c}=e,s=getDispatch(),{enablePlanning:d}=n,[u,m]=(0,r.useState)(""),[p,h]=(0,r.useState)(getDefaultUnit(getPrettyUnits(o))),[g,b]=(0,r.useState)(z),f=!!(u&&p),submit=()=>{let e=convertToNumber(u),t=submitEditor(c,(null==o?void 0:o.alias)||null,e,p,null,d,g,s,o);t&&a(null)};return(0,i.tZ)("form",{id:"SelectedItem",css:(0,l.iv)(SelectedItem_templateObject()),className:"mb20",onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),f&&submit())},children:(0,i.BX)("div",{className:"fcc",children:[(0,i.tZ)(Meta_Meta,{isDummy:!1,selectedItem:o,showBack:!0,onBack:()=>t(),path:[]}),(0,i.tZ)(InputFields,{selectedItem:o,unit:p,setUnit:h,amount:u,setAmount:m,enablePlanning:d,meal:g,setMeal:b}),(0,i.tZ)(ButtonPanel,{showSubmit:f,submit:()=>submit()})]})})},mapFoodToDummyFood=e=>{let t=getAllDummyFoodLeaves(em),n=t[e.name];return n?createDummyFood(n):eu.includes(e.name)?createDummyFood("Pasta","Grain","Pasta"):e};function StandardAdder_templateObject(){let e=(0,a._)(["\n            font-weight: 400;\n            height: 59px;\n            padding: 20px;\n            padding-left: 10px;\n            width: 100%;\n            border-radius: 0px;\n            border: 0px;\n            border-bottom: 1px solid #eee;\n            &:focus {\n              border-color: #eee;\n            }\n          "]);return StandardAdder_templateObject=function(){return e},e}function StandardAdder_templateObject1(){let e=(0,a._)(["\n              padding: 0px 20px;\n            "]);return StandardAdder_templateObject1=function(){return e},e}function StandardAdder_templateObject2(){let e=(0,a._)(["\n                  color: ",";\n                  font-size: 0.9rem;\n                  font-weight: 400;\n                  padding: 15px 20px;\n                "]);return StandardAdder_templateObject2=function(){return e},e}let StandardAdder=e=>{let{foods:t,profile:n,recipes:o,type:a}=e,[c,s]=(0,r.useState)(""),[d,u]=(0,r.useState)([]),[m,p]=(0,r.useState)([]),[h,g]=(0,r.useState)([]),[b,f]=(0,r.useState)(null),[v,w]=(0,r.useState)(null),k=[...t,...o,...eu.map(e=>createDummyFood(e,"Grain","Pasta"))],C=(0,ta.g)(k),clearEverything=()=>{s(""),u([]),g([]),p([]),w(null)},y=r.useRef(null);return r.useEffect(()=>{if(y.current){var e;null===(e=y.current)||void 0===e||e.focus()}},[]),(0,i.BX)("div",{className:"w100",children:[!v&&0===m.length&&(0,i.tZ)("input",{type:"text",id:"StandardAdderSearchbar",value:c,autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",ref:y,placeholder:"Search for items...",css:(0,l.iv)(StandardAdder_templateObject()),onChange:e=>{let t=e.target.value;if(s(t),""===t)u([]);else{let e=(0,tl.B)(t,C),n=e.map(e=>mapFoodToDummyFood(e)),i=ty()(n,e=>e.name+e.type+e.profile);u(i.slice(0,6))}}}),!v&&d.map((e,t)=>(0,i.tZ)(SearchResult,{index:t,result:e,onClick:()=>{if(e.isDummy){let t=[...m,e.name],n=Object.keys((0,tk.Z)(em,t));p(t),g(n),0===m.length&&f(e)}else w(e);u([]),s("")}},e.name+t)),!v&&m.length>=1&&b&&(0,i.BX)(i.HY,{children:[(0,i.tZ)("div",{css:(0,l.iv)(StandardAdder_templateObject1()),children:(0,i.tZ)(Meta_Meta,{selectedItem:b,isDummy:!0,onBack:()=>clearEverything(),showBack:!0,path:m.map(e=>e.toLowerCase())})}),h.map(e=>(0,i.tZ)("button",{className:"fr w100",css:(0,l.iv)(StandardAdder_templateObject2(),F.O9.text),onClick:()=>{let n=[...m,e],i=(0,tk.Z)(em,n);if(Array.isArray(i)){let e=t.find(e=>e.name===i[0]);e&&w(e)}else p(n),g(Object.keys(i))},children:e},e))]}),v&&(0,i.tZ)(SelectedItem,{profile:n,type:a,selectedItem:v,setSelectedItem:w,onBack:()=>clearEverything()})]})};function IngredientModal_templateObject(){let e=(0,a._)(["\n        margin: 0 auto;\n        width: 90%;\n      "]);return IngredientModal_templateObject=function(){return e},e}let IngredientModal=e=>{let{foods:t,profile:n,recipes:o}=e;return(0,i.tZ)("div",{css:(0,l.iv)(IngredientModal_templateObject()),children:(0,i.tZ)(StandardAdder,{profile:n,recipes:o,foods:t,type:"ingredient"})})},defaultOnDelete=e=>{},defaultOnUpdate=(e,t,n)=>void 0,createDefaultItem=(e,t)=>({alias:null,amount:null,barcode:null,basicFood:null,childRecipe:null,consumed:!e,createdAt:null,food:null,id:"",meal:z,name:"",onDelete:defaultOnDelete,onUpdate:defaultOnUpdate,profile:null,recipe:null,src:"",type:"log",unit:t||"GRAM"});function item_modal_components_Meta_templateObject(){let e=(0,a._)(["\n    font-size: 1rem !important;\n    margin-bottom: 0 !important;\n  "]);return item_modal_components_Meta_templateObject=function(){return e},e}let components_Meta_Meta=e=>{let{item:t}=e,{alias:n,barcode:o,childRecipe:r,food:a,name:c,recipe:s,src:d}=t,u=getNameAndTags((null==s?void 0:s.name)||(null==a?void 0:a.name)||(null==r?void 0:r.name)||capitalize((null==o?void 0:o.name)||"")||c||"",n||""),m=(0,l.iv)(item_modal_components_Meta_templateObject());return(0,i.BX)("div",{className:"fr w100 mb20",children:[d&&(0,i.tZ)("img",{css:ey,alt:"Item",src:d}),(0,i.BX)("div",{css:m,className:"".concat(eC),children:[u.name,(0,i.tZ)(Tags,{tags:u.tags})]})]})},renderUnitComponent=(e,t,n,o)=>{if(!n)return(0,i.tZ)("div",{});{let r=getPrettyUnits(n);return(0,i.tZ)(Select,{focus:!1,currentOption:t,optionDictionary:r,onChange:(0,ti.W)(o)(e)})}},convertItemToIngredient=(e,t)=>{let n=new Ingredient;return n.type="ingredient",e.food&&(n.ingredientToFood=e.food),e.recipe&&(n.ingredientToRecipe=e.recipe),e.childRecipe&&(n.ingredientToChildRecipe=e.childRecipe),t?n.amount=t:e.amount&&(n.amount=e.amount),e.unit&&(n.unit=e.unit),n},convertItemToLog=(e,t)=>{let n=new Log;return n.type="log",n.logToFood=e.food,n.logToRecipe=e.recipe,t?n.amount=t:e.amount&&(n.amount=e.amount),e.unit&&(n.unit=e.unit),n},convertFromGramsToCount=(e,t,n,i)=>{let o=e/n;return i&&"CONTAINER"===t?o/i:o},convertFromGramsToVolume=(e,t,n)=>mapTbspToOtherVolumeUnit(e,t/n),convertFromGramsToWeight=(e,t)=>"LBS"===e?t/453:"OZ"===e?t/453*16:t,convertFromGrams=(e,t,n,i,o)=>{let r=W.ML.includes(t),a=W.Nc.includes(t),l=W.xl.includes(t);return r&&i?convertFromGramsToVolume(t,e,i):a?convertFromGramsToWeight(t,e):l&&n?convertFromGramsToCount(e,t,n,o):e};var tN=n(48477);let convertFromUnitToNewUnit=(e,t,n,i,o,r,a)=>{let l=W.ML.includes(t)&&W.ML.includes(n),c="COUNT"===t&&"CONTAINER"===n,s="CONTAINER"===t&&"COUNT"===n,d="COUNT"===t&&W.ML.includes(n),u=W.ML.includes(t)&&"COUNT"===n,m="CONTAINER"===t&&W.ML.includes(n),p=W.ML.includes(t)&&"CONTAINER"===n;if(l){let i=(0,e6.N)(t,e);return mapTbspToOtherVolumeUnit(n,i)}if(c&&a)return e/a;if(s&&a)return e*a;if(d&&r){let t=e*r;return mapTbspToOtherVolumeUnit(n,t)}if(u&&r){let n=(0,e6.N)(t,e);return n/r}if(m&&r&&a){let t=e*a,i=t*r;return mapTbspToOtherVolumeUnit(n,i)}if(p&&r&&a){let n=(0,e6.N)(t,e),i=n/r;return i/a}else{let l=(0,tN.t)(e,t,i,o,r,a);return convertFromGrams(l,n,i,o,a)}},getAmountFromNewUnit=(e,t,n,i)=>{var o,r,a,l,c,s,d,u;let m="log"===e.type?null===(o=e.logToFood)||void 0===o?void 0:o.countToGram:null==e?void 0:null===(r=e.ingredientToFood)||void 0===r?void 0:r.countToGram,p="log"===e.type?null===(a=e.logToFood)||void 0===a?void 0:a.tbspToGram:null==e?void 0:null===(l=e.ingredientToFood)||void 0===l?void 0:l.tbspToGram,h="log"===e.type?null===(c=e.logToFood)||void 0===c?void 0:c.countToTbsp:null==e?void 0:null===(s=e.ingredientToFood)||void 0===s?void 0:s.countToTbsp,g="log"===e.type?null===(d=e.logToFood)||void 0===d?void 0:d.servingPerContainer:null==e?void 0:null===(u=e.ingredientToFood)||void 0===u?void 0:u.servingPerContainer,b=convertFromUnitToNewUnit(t,n,i,m,p,h,g);return b},updateUnit=(e,t,n,i,o)=>{let{amount:r,type:a}=e,l="log"===a?convertItemToLog(e,r):convertItemToIngredient(e,r),c=o?getAmountFromNewUnit(l,prep(t)||l.amount,n,i):prep(t)||l.amount;return{newAmount:String(c),newUnit:i}},UnitInput_UnitInput=e=>{let{convertBetweenUnits:t,item:n,localAmount:i,localUnit:o,setLocalAmount:r,setLocalUnit:a}=e,{childRecipe:l,food:c,id:s,recipe:d}=n;return renderUnitComponent(s,o,c||d||l,(e,l)=>{let{newAmount:c,newUnit:s}=updateUnit(n,i,o,l,t);r(c),a(s)})},submitItem=(e,t,n,i,o,r,a)=>{let l=prep(t),{id:c,type:s}=e;if(a){if("log"===s){let e=a(c,n,l,i,o,r);e.then(()=>{r("closeItemModal")}).catch(e=>{eS.includes(e)||(0,p.S)(e,{showModal:!1})})}else a(c,n,l,null,null,r),r("closeItemModal")}},ItemModal=e=>{let{item:t,profile:n}=e,{dispatch:o}=(0,C.bI)(),{convertBetweenUnits:a,enablePlanning:l}=n,c=void 0===t?createDefaultItem(l):t,{amount:s,barcode:d,consumed:u,meal:m,onUpdate:p,unit:h}=c,[g,b]=r.useState(h),[f,v]=r.useState(m),[w,k]=r.useState(s?String((0,ev.N)(s,2)):""),y=r.useRef(null);return r.useEffect(()=>{var e;null===(e=y.current)||void 0===e||e.focus()},[y]),(0,i.BX)("form",{className:"fcc mw600 mt30",onSubmit:e=>{e.preventDefault(),submitItem(c,w,g,u,f,o,p)},children:[(0,i.tZ)(components_Meta_Meta,{item:c}),"number"==typeof s&&(0,i.tZ)(FractionInput,{inputRef:y,value:w,setValue:k,placeholder:"Enter amount..."}),h&&g&&(0,i.tZ)("div",{className:"w100 mt10 mb10",children:d?(0,i.tZ)(Select,{focus:!1,currentOption:g,optionDictionary:[{COUNT:"SERVING",GRAM:"GRAM"}],onChange:e=>{b(e)}}):(0,i.tZ)(UnitInput_UnitInput,{item:c,localAmount:w,localUnit:g,setLocalAmount:k,setLocalUnit:b,convertBetweenUnits:a})}),m&&f&&n.enablePlanning&&(0,i.tZ)(MealInput,{meal:f,setMeal:v}),s&&h&&(0,i.tZ)(SubmitButton,{submit:!0})]})},FoodList=e=>{let{foods:t}=e,n=t.filter(e=>{var t;return null===(t=e.foodToProfile)||void 0===t?void 0:t.authId}).sort((e,t)=>e.name.localeCompare(t.name));return(0,i.tZ)(List,{purpose:"food-list",items:n,searchable:!0,paginate:!0,updateItem:null,deleteItem:null})},RecipeList=e=>{let{recipes:t}=e,n=t.sort((e,t)=>e.name.localeCompare(t.name));return(0,i.tZ)(List,{purpose:"recipe-list",items:n,searchable:!0,paginate:!0,updateItem:null,deleteItem:null})};var tZ={src:"/_next/static/media/logout.b0633833.svg",height:683,width:683,blurWidth:0,blurHeight:0},tS={src:"/_next/static/media/review.3008f83d.svg",height:512,width:512,blurWidth:0,blurHeight:0},tB={src:"/_next/static/media/settings.c6fd6229.svg",height:512,width:512,blurWidth:0,blurHeight:0};function Menu_templateObject(){let e=(0,a._)(["\n    margin: 10px auto;\n    width: 90%;\n  "]);return Menu_templateObject=function(){return e},e}function Menu_templateObject1(){let e=(0,a._)(["\n    margin-top: 15px;\n    > div {\n      margin: 15px 0;\n      &:first-of-type {\n        margin-top: 5px;\n      }\n    }\n    > button,\n    > a.button {\n      font-size: 0.95rem;\n      justify-content: flex-start;\n      width: 100%;\n\n      img {\n        margin-left: 5px;\n        margin-right: 15px;\n      }\n    }\n  "]);return Menu_templateObject1=function(){return e},e}let Menu=()=>{let{dispatch:e,navbar:t}=(0,C.bI)("navbar"),n=r.useRef(null);r.useEffect(()=>{if(n.current&&!0===t.menuVisibility&&window.innerWidth>1024){var e;null===(e=n.current)||void 0===e||e.focus()}},[t.menuVisibility]);let o=(0,l.iv)(Menu_templateObject()),a=(0,l.iv)(Menu_templateObject1());return(0,i.BX)("div",{id:"Sidebar",css:o,className:"fcs",children:[(0,i.BX)("div",{css:a,className:"w100",children:[(0,i.tZ)("div",{children:"Create"}),(0,i.BX)("button",{id:"openFoodModal",ref:n,onClick:()=>{e("openFoodModal")},children:[(0,i.tZ)(K.E,{width:35,height:35,alt:"Apple with pencil",className:"icon",src:ex}),(0,i.tZ)("div",{className:"ml15",children:"Foods"})]}),(0,i.BX)("button",{id:"openRecipeModal",onClick:()=>{e("openRecipeModal")},children:[(0,i.tZ)(K.E,{alt:"Eggs and bacon with pencil",className:"icon",width:35,height:35,src:eP}),(0,i.tZ)("div",{className:"ml15",children:"Recipes"})]})]}),(0,i.BX)("div",{css:a,className:"w100",children:[(0,i.tZ)("div",{children:"Learn"}),(0,i.BX)("button",{onClick:()=>{window.open("https://cleanslate.sh/curriculum")},children:[(0,i.tZ)(K.E,{width:35,height:35,alt:"Graduation cap",className:"icon",src:eM}),(0,i.tZ)("div",{className:"ml15",children:"Curriculum"})]})]}),(0,i.BX)("div",{css:a,className:"w100",children:[(0,i.tZ)("div",{children:"Other"}),(0,i.BX)("button",{id:"openSettingsModal",onClick:()=>{e("openSettingsModal")},children:[(0,i.tZ)(K.E,{width:35,height:35,alt:"Cog",className:"icon",src:tB}),(0,i.tZ)("div",{className:"ml15",children:"Settings"})]}),(0,i.BX)("button",{id:"openInformationModal",onClick:()=>{e("openInformationModal",(0,i.BX)("div",{children:["Got something to share? Perhaps some feedback or a bug? Awesome! We collect and track all feedback on GitHub.com.",(0,i.tZ)("br",{}),(0,i.tZ)("br",{}),(0,i.tZ)("a",{target:"_blank",href:"https://github.com/paulzakin/cleanslate/issues/new/choose",rel:"noreferrer",children:"Go to GitHub.com"})," ","and create a free account. Then, create an Issue!"]}))},children:[(0,i.tZ)(K.E,{width:35,height:35,alt:"Letter",className:"icon",src:tS}),(0,i.tZ)("div",{className:"ml15",children:"Feedback"})]}),(0,i.BX)("button",{id:"logout",onClick:()=>{(0,k.k)()},children:[(0,i.tZ)(K.E,{width:35,height:35,alt:"Door openings",className:"icon",src:tZ}),(0,i.tZ)("div",{className:"ml15",children:"Logout"})]})]})]})};var tT=n(41087),tx=n.n(tT),tj={src:"/_next/static/media/return-arrow.2048e808.svg",height:16,width:16,blurWidth:0,blurHeight:0};let getAnimationDuration=e=>["fadeIn","fadeOut","fadeOutHard"].includes(e||"")?["0s",0]:["0.5s",500],sidebarPresent=()=>window.innerWidth<=1024;function Modal_templateObject(){let e=(0,a._)(["\n    animation-duration: ",";\n    background: linear-gradient(rgba(1, 1, 1, 0.5), rgba(1, 1, 1, 0.5));\n    min-height: 100%;\n    > div:first-of-type {\n      animation-duration: ",";\n      background-color: white;\n      border-radius: 5px;\n      margin: 20px auto;\n      max-height: 80%;\n      max-width: 900px;\n      padding-bottom: 20px;\n      width: 95%;\n    }\n\n    @media (max-width: ","px) {\n      > div:first-of-type {\n        border-radius: 0;\n        height: auto;\n        margin: 0;\n        max-height: none;\n        max-width: 100%;\n        min-height: 100%;\n        padding-bottom: 20px;\n        padding-top: 10px;\n        width: 100%;\n      }\n    }\n  "]);return Modal_templateObject=function(){return e},e}function Modal_templateObject1(){let e=(0,a._)(["\n    background-color: white;\n    border-color: transparent;\n    border-radius: 5px 0 0 0;\n    color: white;\n    flex-shrink: 0;\n    left: 5px;\n    margin-right: auto;\n    margin-top: 15px;\n    padding: 0 10px;\n    position: relative;\n    width: 100%;\n\n    &:active,\n    &:hover,\n    &:focus {\n      background-color: white;\n    }\n\n    @media (min-width: ","px) {\n      &:active,\n      &:hover,\n      &:focus {\n        > img {\n          outline: 1px solid ",";\n        }\n      }\n    }\n  "]);return Modal_templateObject1=function(){return e},e}function Modal_templateObject2(){let e=(0,a._)(["\n    left: 0;\n    min-height: 100%;\n    position: absolute;\n    top: 0;\n    width: 100vw;\n    z-index: -1;\n  "]);return Modal_templateObject2=function(){return e},e}let Modal=e=>{let{children:t,closeIcon:n,closeModal:o,dialogStyles:a,duration:c,inTransition:s,name:d,outTransition:u,shellOutTransition:m,styles:p,visible:h}=e,g=r.useRef(null),b=r.useRef(null),[f,v]=r.useState(h),w=s||(sidebarPresent()?"slideInLeft":"fadeIn"),k=u||(sidebarPresent()?"slideOutLeft":"fadeOut"),C=c||getAnimationDuration(h?w:k)[0];r.useEffect(()=>{h&&v(!0)},[h]);let y=(0,l.iv)(Modal_templateObject(),C,C,F._M),_=(0,l.iv)(Modal_templateObject1(),F._M,F.O9.mediumgrey),O=(0,l.iv)(Modal_templateObject2()),N=f?(0,i.BX)("div",{id:"modal-".concat(d),css:[y,p],onAnimationEnd:()=>!h&&v(!1),className:"absolute w100 h100 fcc scroll z1 animate ".concat(h?"":m||"fadeOut"),children:[(0,i.BX)("div",{role:"dialog",ref:g,css:a,className:"\n            animate scroll fcs\n            ".concat(!0===h?w:k,"\n          "),children:[(void 0===n||n)&&(0,i.tZ)("button",{"aria-label":"close",css:_,className:"fr ultra",ref:b,onClick:()=>{o()},type:"button",children:(0,i.tZ)(K.E,{height:30,width:20,alt:"arrow point left",src:tj})}),t]}),(0,i.tZ)("div",{onClick:()=>{o()},css:O})]}):(0,i.tZ)("div",{});return isMobile()?N:f?(0,i.tZ)(tx(),{children:N}):N};var tM={src:"/_next/static/media/chrome-share.3516c7ff.svg",height:512,width:512,blurWidth:0,blurHeight:0},tP={src:"/_next/static/media/safari-share.cbaba215.svg",height:169,width:120,blurWidth:0,blurHeight:0},tI={src:"/_next/static/media/logo-circle.7c4aefe6.svg",height:512,width:512,blurWidth:0,blurHeight:0};function PWAPrompt_templateObject(){let e=(0,a._)(["\n          color: #111;\n          font-size: 1.6rem;\n          font-weight: 900;\n        "]);return PWAPrompt_templateObject=function(){return e},e}function PWAPrompt_templateObject1(){let e=(0,a._)(["\n          font-size: 1.1rem;\n          max-width: 400px;\n          text-align: center;\n        "]);return PWAPrompt_templateObject1=function(){return e},e}function PWAPrompt_templateObject2(){let e=(0,a._)(["\n          font-size: 1.1rem;\n          width: 100%;\n        "]);return PWAPrompt_templateObject2=function(){return e},e}let PWAPrompt=e=>{let{profile:t}=e,n=getDispatch();return(0,i.BX)("div",{className:"fcc",children:[(0,i.tZ)(K.E,{width:100,height:100,src:tI,alt:"Logo"}),(0,i.tZ)("h2",{css:(0,l.iv)(PWAPrompt_templateObject()),className:"mt20",children:"Clean Slate"}),(0,i.tZ)("p",{css:(0,l.iv)(PWAPrompt_templateObject1()),children:"Add this app to your homescreen for easy access and an app-like experience."}),(0,i.BX)("div",{css:(0,l.iv)(PWAPrompt_templateObject2()),className:"frc mt10 mb20",children:["Tap"," ",isMobileSafari()?(0,i.tZ)("div",{className:"ml10 mr10",children:(0,i.tZ)(K.E,{width:25,height:25,src:tP,alt:"Safari share button"})}):(0,i.tZ)("div",{className:"ml10 mr10",children:(0,i.tZ)(K.E,{width:25,height:25,src:tM,alt:"Chrome share button"})})," ","then ",'"',"Add to Homescreen",'"']}),(0,i.tZ)("div",{children:(0,i.tZ)("button",{className:"purple bold mt10",onClick:()=>{let e={id:t.id,set:{hidePWAPrompt:!0}};updateProfileOnCloud(e,()=>{n("closePWAPrompt")})},children:"Hide this tip in the future"})})]})},addQuickAddLog=(e,t,n,i)=>{let o={objects:[]};t>0&&o.objects.push({amount:t,unit:"PROTEIN"}),e>0&&o.objects.push({amount:e,unit:"CALORIE"}),addQuickLogToCloud(o,n,()=>{i("closeQuickAddModal")})};function QuickAdder_templateObject(){let e=(0,a._)(["\n    border-radius: 0;\n    margin: 0;\n  "]);return QuickAdder_templateObject=function(){return e},e}function QuickAdder_templateObject1(){let e=(0,a._)(["\n    border: 0;\n    border-radius: 0;\n    height: 60px;\n    &:focus {\n      font-weight: 400;\n    }\n    &:first-of-type {\n      border-right: 1px solid ",";\n    }\n    &:nth-of-type(2) {\n      padding-left: 30px;\n    }\n  "]);return QuickAdder_templateObject1=function(){return e},e}function QuickAdder_templateObject2(){let e=(0,a._)(["\n          border-radius: 0;\n          height: 60px;\n          margin-top: 0;\n        "]);return QuickAdder_templateObject2=function(){return e},e}let QuickAdder=e=>{let{profile:t}=e,{enablePlanning:n}=t,[o,a]=r.useState(null),[c,s]=r.useState(null),d=r.useRef(null),{dispatch:u,navbar:m}=(0,C.bI)("navbar");r.useEffect(()=>{if(a(null),s(null),d.current&&m.quickAddModalVisibility){var e;null===(e=d.current)||void 0===e||e.focus()}},[m.quickAddModalVisibility]);let p=(0,l.iv)(QuickAdder_templateObject()),h=(0,l.iv)(QuickAdder_templateObject1(),F.O9.lightgrey);return(0,i.BX)("form",{onSubmit:e=>{e.preventDefault(),o||c?addQuickAddLog(Number(o),Number(c),n,u):H.ZP.error("You must include a value!")},css:p,className:"frc w100",children:[(0,i.tZ)("input",{autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",css:h,className:"w50",id:"calories",inputMode:"decimal",onChange:e=>{a(e.target.value)},placeholder:"Calories",ref:d,step:"any",type:"number",value:o||""}),(0,i.tZ)("input",{autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",css:h,className:"w50",id:"protein",inputMode:"decimal",onChange:e=>{s(e.target.value)},placeholder:"Protein",step:"any",type:"number",value:c||""}),(0,i.tZ)(SubmitButton,{onClick:()=>{},submit:!0,css:(0,l.iv)(QuickAdder_templateObject2())})]})},updateUnitLogsOnCloud=async(e,t,n,i,o)=>{try{let r=e.filter(e=>e.unit===n).map(e=>e.id);await deleteLogsOnCloud(r,()=>{}),await addQuickLogToCloud({objects:[{amount:t,unit:n}]},i,()=>{}),o()}catch(e){(0,p.S)(e)}},UnitModal=e=>{let{item:t,logs:n,profile:o}=e,{dispatch:a}=(0,C.bI)(),{enablePlanning:l}=o,c=void 0===t?createDefaultItem(l):t,[s,d]=r.useState(c.amount||""),u=r.useRef(null);return r.useEffect(()=>{var e;null===(e=u.current)||void 0===e||e.focus()},[u]),(0,i.BX)("form",{className:"fcc mw600 mt30",onSubmit:e=>{e.preventDefault(),updateUnitLogsOnCloud(n,Number(s),null==t?void 0:t.unit,o.enablePlanning,()=>{a("closeUnitModal")})},children:[(0,i.tZ)(components_Meta_Meta,{item:c}),(0,i.tZ)(FractionInput,{className:"mb30",value:s,setValue:d,inputRef:u}),(0,i.tZ)(SubmitButton,{submit:!0})]})},getOrderedModals=(e,t,n)=>{let match=t=>e.find(e=>e.props.name===t),i=t.filter(e=>!n.includes(e)),o=isMobile()||sidebarPresent(),r=[...n.map(match),...o?i.map(match):[]];return r};function styling_templateObject(){let e=(0,a._)(["\n  > div:first-of-type {\n    background: transparent !important;\n  }\n"]);return styling_templateObject=function(){return e},e}function styling_templateObject1(){let e=(0,a._)(["\n  @media (min-width: ","px) {\n    > div > div {\n      opacity: 0 !important;\n    }\n    > div:last-child > div {\n      opacity: 1 !important;\n    }\n  }\n"]);return styling_templateObject1=function(){return e},e}let getErrorStyling=()=>(0,l.iv)(styling_templateObject()),tF=(0,l.iv)(styling_templateObject1(),F._M+1);function Modals_templateObject(){let e=(0,a._)(["\n    justify-content: flex-start !important;\n    > div:first-of-type {\n      border-radius: 0 !important;\n      margin: 0 !important;\n      max-width: 100% !important;\n      padding: 0 !important;\n      top: 0 !important;\n      width: 100% !important;\n      min-height: auto !important;\n    }\n  "]);return Modals_templateObject=function(){return e},e}function Modals_templateObject1(){let e=(0,a._)(["\n        > div {\n          max-width: 450px !important;\n        }\n      "]);return Modals_templateObject1=function(){return e},e}var modals_Modals=e=>{let{foods:t,logs:n,profile:o,recipes:r}=e,{navbar:a}=(0,C.bI)("navbar"),c=getDispatch(),{activeModals:s,addIngredientModalVisibility:d,barcodeModalVisibility:u,bodyFatPercentageModalVisibility:m,errorVisibility:p,exerciseModalVisibility:h,foodFormModalVisibility:g,foodModalVisibility:b,foodToUpdate:f,helpModalVisibility:v,Information:w,informationModalVisibility:k,itemModalVisibility:y,itemToUpdate:_,menuVisibility:O,modalVisibility:N,pwaPromptVisibility:Z,quickAddModalVisibility:S,recipeFormModalVisibility:B,recipeModalVisibility:T,recipeToUpdate:x,settingsModalVisibility:j,targetModalVisibility:M,unitModalVisibility:P}=a,I=(0,l.iv)(Modals_templateObject()),F=[(0,i.tZ)(Modal,{styles:I,closeIcon:!1,closeModal:()=>{c("closeModal")},inTransition:"slideInDown",outTransition:"fadeOutHard",name:"navbar.modalVisibility",visible:N,children:(0,i.tZ)(StandardAdder,{profile:o,recipes:r,foods:t,type:"log"})}),(0,i.tZ)(Modal,{styles:I,closeIcon:!1,closeModal:()=>{c("closeQuickAddModal")},inTransition:"slideInDown",outTransition:"fadeOutHard",name:"navbar.quickAddModalVisibility",visible:S,children:(0,i.tZ)(QuickAdder,{profile:o})}),(0,i.tZ)(Modal,{closeModal:()=>{c("closeMenu")},visible:O,name:"navbar.menuVisibility",children:(0,i.tZ)(Menu,{})}),(0,i.tZ)(Modal,{closeModal:()=>{c("closeExerciseModal")},name:"navbar.exerciseModalVisibility",visible:h,children:(0,i.tZ)(ExerciseForm,{profile:o})}),(0,i.tZ)(Modal,{styles:(0,l.iv)(Modals_templateObject1()),closeModal:()=>{c("closeBarcodeModal")},name:"navbar.barcodeModalVisibility",visible:u,children:(0,i.tZ)(BarcodeModal,{profile:o,type:T?"ingredient":"log"})}),(0,i.tZ)(Modal,{closeModal:()=>{c("closeTargetModal")},name:"navbar.targetModalVisibility",visible:M,children:(0,i.tZ)(TargetForm,{profile:o})}),(0,i.tZ)(Modal,{closeModal:()=>{c("closeSettingsModal")},name:"navbar.settingsModalVisibility",visible:j,children:(0,i.tZ)(Settings,{profile:o})}),(0,i.tZ)(Modal,{closeModal:()=>{c("closeBodyFatPercentageModal")},name:"navbar.bodyFatPercentageModalVisibility",visible:m,children:(0,i.tZ)(BodyFatPercentageForm,{})}),(0,i.tZ)(Modal,{closeModal:()=>{c("closeFoodModal")},name:"navbar.foodModalVisibility",visible:b,children:(0,i.BX)("div",{className:"w100 h100 fcs expand",children:[(0,i.tZ)("button",{id:"openFoodFormModal",type:"button",onClick:()=>{c("openFoodFormModal",null)},className:"purple bold mb25",children:"Add custom food"}),(0,i.tZ)("div",{className:"w90 h100 fcs expand",children:(0,i.tZ)(FoodList,{foods:t})})]})}),(0,i.tZ)(Modal,{closeModal:()=>{c("closeRecipeModal")},name:"navbar.recipeModalVisibility",visible:T,children:(0,i.BX)("div",{className:"w100 h100 fcs expand",children:[(0,i.tZ)("button",{type:"button",onClick:()=>{c("openRecipeFormModal",null)},className:"purple bold mb25",children:"Add recipe"}),(0,i.tZ)("div",{className:"w90 h100 fcs expand",children:(0,i.tZ)(RecipeList,{recipes:r})})]})}),(0,i.tZ)(Modal,{closeModal:()=>{window.confirm("You may have unsaved changes that will be lost. Is that OK?")&&c("closeRecipeFormModal")},name:"navbar.recipeFormModalVisibility",visible:B,children:(0,i.tZ)(RecipeForm,{profile:o,foods:t,recipe:r.filter(e=>e.id===x)[0]})}),(0,i.tZ)(Modal,{closeIcon:!0,closeModal:()=>{c("closeAddIngredientModal")},name:"navbar.addIngredientModalVisibility",visible:d,children:(0,i.tZ)(IngredientModal,{profile:o,recipes:r,foods:t})}),(0,i.tZ)(Modal,{closeModal:()=>{window.confirm("You may have unsaved changes that will be lost. Is that OK?")&&c("closeFoodFormModal")},name:"navbar.foodFormModalVisibility",visible:g,children:(0,i.tZ)(CustomFoodForm,{food:t.filter(e=>e.id===f)[0]})}),(0,i.tZ)(Modal,{id:"item-modal",closeIcon:!0,closeModal:()=>{c("closeItemModal")},name:"navbar.itemModalVisibility",visible:y,children:(0,i.tZ)(ItemModal,{item:_,profile:o})}),(0,i.tZ)(Modal,{id:"unit-modal",closeIcon:!0,closeModal:()=>{c("closeUnitModal")},name:"navbar.unitModalVisibility",visible:P,children:(0,i.tZ)(UnitModal,{profile:o,item:_,logs:n})}),(0,i.tZ)(Modal,{closeModal:()=>{c("closeHelpModal")},name:"navbar.helpModalVisibility",visible:v,children:(0,i.tZ)(Help,{})}),(0,i.tZ)(Modal,{closeModal:()=>{c("closeInformationModal")},visible:k,name:"navbar.informationModalVisibility",children:(0,i.tZ)(InformationModal,{Information:w})}),(0,i.tZ)(Modal,{closeModal:()=>{c("closeError")},closeIcon:!1,name:"navbar.errorVisibility",styles:getErrorStyling(),visible:p,children:(0,i.tZ)(e3.j,{})},"navbar.errorVisibility"),(0,i.tZ)(Modal,{name:"navbar.pwaPromptVisibility",visible:Z,closeModal:()=>{c("closePWAPrompt")},children:(0,i.tZ)(PWAPrompt,{profile:o})},"navbar.pwaPromptVisibility")],R=getOrderedModals(F,eE.q,s);return(0,i.tZ)("div",{css:[tF],className:"z2",children:R.filter(e=>null==e?void 0:e.props.name).map(e=>(0,i.tZ)("div",{children:e},null==e?void 0:e.props.name))})};function Numbers_templateObject(){let e=(0,a._)(["\n  margin: 0 auto;\n  margin-bottom: 20px;\n  margin-top: 20px;\n  width: 100%;\n"]);return Numbers_templateObject=function(){return e},e}function Numbers_templateObject1(){let e=(0,a._)(["\n  flex: 1;\n  margin-left: 10px;\n  &:last-child {\n    margin-left: 0;\n  }\n  > div {\n    border-radius: 5px;\n    font-size: 0.95rem;\n    height: 32px;\n    margin-left: 10px;\n    min-width: 40px;\n\n    div {\n      color: ",";\n      padding: 0px 7.5px;\n    }\n  }\n"]);return Numbers_templateObject1=function(){return e},e}function Numbers_templateObject2(){let e=(0,a._)(["\n  color: white !important;\n  font-size: 1.3rem;\n  position: relative;\n  display: inline-block;\n  margin-top: -1.5px;\n"]);return Numbers_templateObject2=function(){return e},e}function Numbers_templateObject3(){let e=(0,a._)(["\n                        margin: 0px 2px;\n                      "]);return Numbers_templateObject3=function(){return e},e}function Numbers_templateObject4(){let e=(0,a._)(["\n                        margin: 0px 2px;\n                      "]);return Numbers_templateObject4=function(){return e},e}let tR=(0,l.iv)(Numbers_templateObject()),tL=(0,l.iv)(Numbers_templateObject1(),F.O9.black),tA=(0,l.iv)(Numbers_templateObject2()),Numbers=e=>{let{logs:t,profile:n}=e,o=n.countDown,[r,a,c]=(0,ef.cE)(t).map(e=>Math.round(e)),[s,d]=I.D4;s=n.calorieTarget,d=n.proteinTarget;let u=s+c-r,m=d-a,p=d===I.D4[1],h=p||!1===n.showCalories;return(0,i.tZ)("div",{id:"numbers",css:tR,children:(0,i.BX)("div",{className:"fr",children:[(0,i.BX)("div",{id:"TopBarCalories",css:tL,className:"frc",children:["Calories",(0,i.tZ)("div",{className:"green fcc",children:h?"":(0,i.tZ)("div",{children:o?(0,ev.N)(u,0):(0,i.BX)(i.HY,{children:[r,(0,i.tZ)("span",{css:(0,l.iv)(Numbers_templateObject3()),children:"/"}),s+c]})})})]}),(0,i.BX)("div",{id:"TopBarProtein",css:tL,className:"frc",children:["Protein",(0,i.tZ)("div",{className:"fcc ".concat(m<=0&&o?"success":"blue"),children:h?"":(0,i.BX)("div",{children:[o&&m<=0&&(0,i.tZ)("div",{css:tA,children:"✓"}),o&&m>0&&(0,ev.N)(m,0),!o&&(0,i.BX)(i.HY,{children:[a,(0,i.tZ)("span",{css:(0,l.iv)(Numbers_templateObject4()),children:"/"}),d]})]})})]})]})})};function TopBar_templateObject(){let e=(0,a._)(["\n    background-color: white;\n    border-bottom: 1px solid #eee;\n    cursor: pointer;\n    height: ","px;\n  "]);return TopBar_templateObject=function(){return e},e}let TopBar=e=>{let{children:t,height:n,onClick:o}=e,r=(0,l.iv)(TopBar_templateObject(),n);return(0,i.tZ)("div",{css:r,onClick:()=>o(),className:"fcc z2",children:t})};function App_templateObject(){let e=(0,a._)(["\n        #macros {\n          span {\n            display: ",";\n          }\n        }\n      "]);return App_templateObject=function(){return e},e}let App=()=>{let{dispatch:e,foods:t,logs:n,offline:o,profile:r,recipes:a}=useData(),c=useUser();return useStartTime(),useShortcuts(executeKeyboardShortcuts),useSubscription([subscribeToProfile],c,o,r),usePWAPrompt(r,e),useLogoutOtherTab(),(0,i.BX)("div",{id:"app",className:"no-scroll",suppressHydrationWarning:!0,css:(0,l.iv)(App_templateObject(),r.showCalories?"inline-block":"none"),children:[(0,i.tZ)(TopBar,{height:65,onClick:()=>r.showCalories?e("openTargetModal"):void 0,children:(0,i.tZ)(Numbers,{profile:r,logs:n})}),(0,i.BX)(Body,{navbar:65,footer:65,profile:r,children:[(0,i.tZ)(UnitList,{logs:n}),(0,i.tZ)(LogList,{profile:r,logs:n,foods:t})]}),(0,i.tZ)(BottomBar,{height:65,children:(0,i.tZ)(BottomBarButtons,{profile:r})}),(0,i.tZ)(modals_Modals,{profile:r,foods:t,recipes:a,logs:n})]})};var tE=n(68127),tD=n(44675);function LegalDisclaimer_templateObject(){let e=(0,a._)(["\n        font-size: 0.7rem;\n        text-align: center;\n        padding-bottom: 10px;\n      "]);return LegalDisclaimer_templateObject=function(){return e},e}let LegalDisclaimer=()=>{let e=tD.env.NEXT_PUBLIC_LEGAL_LINK;return e?(0,i.BX)("p",{css:(0,l.iv)(LegalDisclaimer_templateObject()),children:["By logging in, you agree to our"," ",(0,i.tZ)("a",{target:"_blank",rel:"noopener noreferer",href:e,children:"Terms"})," ","&"," ",(0,i.tZ)("a",{target:"_blank",rel:"noopener noreferer",href:e,children:"Privacy Policy"})]}):(0,i.tZ)(i.HY,{})};var tX=n(44675);function FirebaseLoginButtons_templateObject(){let e=(0,a._)(["\n  border-radius: 5px;\n  color: white;\n  font-size: 0.95rem;\n  font-weight: 700;\n  margin: 5px 5px;\n  min-width: 225px;\n  padding: 15px 0;\n  text-decoration: none;\n\n  > span {\n    margin-right: 15px;\n  }\n"]);return FirebaseLoginButtons_templateObject=function(){return e},e}function FirebaseLoginButtons_templateObject1(){let e=(0,a._)(["\n                background-color: #4285f4;\n                width: 210px;\n                &:hover,\n                &:focus {\n                  background-color: #2472f2;\n                }\n              "]);return FirebaseLoginButtons_templateObject1=function(){return e},e}function FirebaseLoginButtons_templateObject2(){let e=(0,a._)(["\n                width: 210px;\n              "]);return FirebaseLoginButtons_templateObject2=function(){return e},e}function FirebaseLoginButtons_templateObject3(){let e=(0,a._)(["\n                width: 210px;\n              "]);return FirebaseLoginButtons_templateObject3=function(){return e},e}function FirebaseLoginButtons_templateObject4(){let e=(0,a._)(["\n                width: 210px;\n              "]);return FirebaseLoginButtons_templateObject4=function(){return e},e}function FirebaseLoginButtons_templateObject5(){let e=(0,a._)(["\n          width: 90%;\n          font-size: 0.95rem;\n          margin-top: 30px;\n          margin-bottom: 20px;\n        "]);return FirebaseLoginButtons_templateObject5=function(){return e},e}(0,l.iv)(FirebaseLoginButtons_templateObject());let FirebaseLoginButtons=()=>(0,i.BX)("div",{className:"fcc w100",children:[(0,i.tZ)("div",{className:"fcc w100",children:(0,i.BX)("div",{className:"frc wrap",children:["true"===tX.env.NEXT_PUBLIC_LOGIN_WITH_GOOGLE&&(0,i.BX)("button",{className:"black m5 ml5 mr5",css:(0,l.iv)(FirebaseLoginButtons_templateObject1()),onClick:()=>{let e=(0,th.v0)(tW);(0,th.rh)(e,new th.hJ).then(()=>{setTimeout(()=>{window.location.reload()},100)})},children:[(0,i.tZ)(tE.ldW,{className:"mr10",size:18}),"Sign in with Google"]}),"true"===tX.env.NEXT_PUBLIC_LOGIN_WITH_APPLE&&(0,i.BX)("button",{css:(0,l.iv)(FirebaseLoginButtons_templateObject2()),className:"black m5 ml5 mr5",onClick:()=>{let e=(0,th.v0)(tW);(0,th.rh)(e,new th.O4("apple.com")).then(()=>{setTimeout(()=>{window.location.reload()},100)})},children:[(0,i.tZ)(tE.oPZ,{className:"mr10",size:18}),"Sign in with Apple"]}),"true"===tX.env.NEXT_PUBLIC_LOGIN_WITH_FACEBOOK&&(0,i.BX)("button",{css:(0,l.iv)(FirebaseLoginButtons_templateObject3()),className:"facebook m5 ml5 mr5",onClick:()=>{let e=(0,th.v0)(tW);(0,th.rh)(e,new th._O).then(()=>{setTimeout(()=>{window.location.reload()},100)})},children:[(0,i.tZ)(tE.Am9,{className:"mr10",size:18}),"Sign in with Facebook"]}),"true"===tX.env.NEXT_PUBLIC_LOGIN_WITH_GITHUB&&(0,i.BX)("button",{css:(0,l.iv)(FirebaseLoginButtons_templateObject4()),className:"black m5 ml5 mr5",onClick:()=>{let e=(0,th.v0)(tW);(0,th.rh)(e,new th.GH).then(()=>{setTimeout(()=>{window.location.reload()},100)})},children:[(0,i.tZ)(tE.hJX,{className:"mr10",size:18}),"Sign in with GitHub"]})]})}),(0,i.tZ)(eF.i,{css:(0,l.iv)(FirebaseLoginButtons_templateObject5()),color:"yellow",children:(0,i.BX)("div",{children:["An account is made automatically on login. Clean Slate is free, so enjoy! To learn more about the app,"," ",(0,i.tZ)("a",{href:"https://cleanslate.sh/",target:"_blank",rel:"noreferrer",children:"go here."})]})}),(0,i.tZ)(LegalDisclaimer,{})]});function TokenLoginButtons_templateObject(){let e=(0,a._)(["\n        width: 90%;\n      "]);return TokenLoginButtons_templateObject=function(){return e},e}function TokenLoginButtons_templateObject1(){let e=(0,a._)(["\n          width: 100%;\n          font-size: 0.95rem;\n          margin-top: 30px;\n          margin-bottom: 20px;\n        "]);return TokenLoginButtons_templateObject1=function(){return e},e}let TokenLoginButtons=()=>{let[e,t]=(0,r.useState)("");return(0,i.BX)("form",{css:(0,l.iv)(TokenLoginButtons_templateObject()),children:[(0,i.tZ)("label",{children:"Token"}),(0,i.tZ)("input",{id:"token",value:e,onChange:e=>t(e.target.value),className:"mt10",type:"password",placeholder:"XXX",required:!0}),(0,i.tZ)("button",{type:"submit",id:"login-button",className:"black bold mt20",onClick:async t=>{if(t.preventDefault(),e){let t=await (0,M.v)(e),n=await (0,f.a)(t),i=await n.request(d.jt,{token:e});void 0===i||0===i.profiles.length?H.Am.error("No profile matches that token!"):(localStorage.setItem(h.px,e),login(),(0,s.b)().dispatch("updateUser",{token:e}))}else H.Am.error("You must enter your token!")},children:"Login"}),(0,i.tZ)(eF.i,{css:(0,l.iv)(TokenLoginButtons_templateObject1()),color:"yellow",children:(0,i.BX)("div",{children:["To create an account, the admin must use the Hasura Console to make a profile. The token is the authId of the profile. To learn more about the app,"," ",(0,i.tZ)("a",{href:"https://cleanslate.sh/",target:"_blank",rel:"noreferrer",children:"go here."})]})}),(0,i.tZ)(LegalDisclaimer,{})]})};function LoginPanel_templateObject(){let e=(0,a._)(["\n    background-color: ",";\n    height: 100%;\n\n    > div {\n      background-color: white !important;\n      border-radius: 25px;\n      box-shadow: rgb(0 0 0 / 10%) 0 36px 42px;\n      position: relative;\n      max-width: 500px;\n      width: 90%;\n      min-height: 375px;\n    }\n  "]);return LoginPanel_templateObject=function(){return e},e}let LoginPanel=()=>{let e=(0,l.iv)(LoginPanel_templateObject(),F.O9.background);return(0,i.tZ)("div",{css:e,className:"w100 fcc center scroll",children:(0,i.BX)("div",{className:"fcc",children:[(0,i.tZ)("h1",{style:{fontSize:"1.8rem"},className:"mt50 mb20 tcenter",children:"Clean Slate ❤️"}),(0,_.j)()&&v.I&&(0,i.tZ)(FirebaseLoginButtons,{}),(0,_.j)()&&!v.I&&(0,i.tZ)(TokenLoginButtons,{})]})})},Login=()=>(0,i.tZ)("div",{suppressHydrationWarning:!0,className:"h100",children:(0,i.tZ)(LoginPanel,{})}),sleep=e=>new Promise(t=>setTimeout(t,e)),validateToken=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(t>=10)return(0,p.S)("Error: validateToken"),null;let n=await e.getIdTokenResult(),i=n.claims["https://hasura.io/jwt/claims"];i?(login(),y.h.dispatch("updateUser",e)):(await e.getIdToken(!0),await sleep(200),validateToken(e,t+1))},useAuthentication=e=>{r.useEffect(()=>{!e&&v.I?o.Z.auth().onAuthStateChanged(async e=>{e&&await validateToken(e)}):getToken()&&(0,s.b)().dispatch("updateUser",{token:getToken()})},[e])},useOffline=()=>{r.useEffect(()=>{window.addEventListener("offline",()=>{y.h.dispatch("isOffline",!0)}),window.addEventListener("online",()=>{y.h.dispatch("isOffline",!1)})},[])},useOfflineStatus=()=>{let{navbar:e}=(0,C.bI)("navbar");return e.offline},tW=o.Z.apps.length?o.Z.app():o.Z.initializeApp((0,v.d)());var pages=()=>{let e=useUser(),t=useOfflineStatus(),[n,o]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{o(!0)},[]),useOffline(),useAuthentication(t),(0,i.tZ)(i.HY,{children:n?isLoadedUser(e)||getLoginStatus()?(0,i.tZ)(App,{}):(0,i.tZ)(Login,{}):(0,i.tZ)("div",{})})}}},function(e){e.O(0,[701,850,952,852,774,888,179],function(){return e(e.s=37412)}),_N_E=e.O()}]);
//# sourceMappingURL=index-8fe7aac20923d6e3.js.map